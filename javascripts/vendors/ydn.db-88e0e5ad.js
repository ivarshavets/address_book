!function(t,e,n){"undefined"!=typeof n.module&&n.module.exports?n.module.exports=e.apply(n):"undefined"!=typeof n.define&&"function"===n.define&&n.define.amd?define(t,[],e):n[t]=e()}("ydn",function(){function t(t){return void 0!==t}function e(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&"undefined"!=typeof t.splice&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof t.call&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&"undefined"==typeof t.call)return"object";return e}function n(t){return"array"==e(t)}function r(t){var n=e(t);return"array"==n||"object"==n&&"number"==typeof t.length}function i(t){return"string"==typeof t}function o(t){return"boolean"==typeof t}function a(t){return"number"==typeof t}function s(t){return"function"==e(t)}function u(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function c(t){return t.call.apply(t.bind,arguments)}function l(t,e){if(!t)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,n),t.apply(e,r)}}return function(){return t.apply(e,arguments)}}function f(){return f=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?c:l,f.apply(null,arguments)}function h(t){var e=Array.prototype.slice.call(arguments,1);return function(){var n=e.slice();return n.push.apply(n,arguments),t.apply(this,n)}}function p(e,n){var r=e.split("."),i=ei;r[0]in i||!i.execScript||i.execScript("var "+r[0]);for(var o;r.length&&(o=r.shift());)!r.length&&t(n)?i[o]=n:i=i[o]?i[o]:i[o]={}}function d(t,e){function n(){}n.prototype=e.prototype,t.r=e.prototype,t.prototype=new n,t.qb=function(t,n){return e.prototype[n].apply(t,Array.prototype.slice.call(arguments,2))}}function v(t){t.prototype.then=t.prototype.then,t.prototype.$goog_Thenable=!0}function g(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function m(t){if(Error.captureStackTrace)Error.captureStackTrace(this,m);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function y(t){for(var e=0;1>e;e++)if('"'==t.charAt(0)&&'"'==t.charAt(t.length-1))return t.substring(1,t.length-1);return t}function b(t){if(t=String(t),t.quote)return t.quote();for(var e=['"'],n=0;n<t.length;n++){var r,i=t.charAt(n),o=i.charCodeAt(0),a=n+1;(r=ai[i])||(o>31&&127>o||(i in si?i=si[i]:i in ai?i=si[i]=ai[i]:(o=i,r=i.charCodeAt(0),r>31&&127>r?o=i:(256>r?(o="\\x",(16>r||r>256)&&(o+="0")):(o="\\u",4096>r&&(o+="0")),o+=r.toString(16).toUpperCase()),i=si[i]=o)),r=i),e[a]=r}return e.push('"'),e.join("")}function w(t){ei.setTimeout(function(){throw t},0)}function $(){if(ei.Promise&&ei.Promise.resolve){var t=ei.Promise.resolve();return function(e){t.then(function(){try{e()}catch(t){w(t)}})}}var e=ei.MessageChannel;if("undefined"==typeof e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&(e=function(){var t=document.createElement("iframe");t.style.display="none",t.src="",document.documentElement.appendChild(t);var e=t.contentWindow,t=e.document;t.open(),t.write(""),t.close();var n="callImmediate"+Math.random(),r=e.location.protocol+"//"+e.location.host,t=f(function(t){(t.origin==r||t.data==n)&&this.port1.onmessage()},this);e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),"undefined"!=typeof e){var n=new e,r={},i=r;return n.port1.onmessage=function(){r=r.next;var t=r.Da;r.Da=null,t()},function(t){i.next={Da:t},i=i.next,n.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("script")?function(t){var e=document.createElement("script");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){ei.setTimeout(t,0)}}function x(t,e){if(!ui){var n=E;s(ei.setImmediate)?ei.setImmediate(n):(oi||(oi=$()),oi(n)),ui=!0}ci.push(new k(t,e))}function E(){for(;ci.length;){var t=ci;ci=[];for(var e=0;e<t.length;e++){var n=t[e];try{n.a.call(n.b)}catch(r){w(r)}}}ui=!1}function k(t,e){this.a=t,this.b=e}function S(t,e){this.b=li,this.f=void 0,this.a=this.c=null,this.d=this.e=!1;try{var n=this;t.call(e,function(t){T(n,fi,t)},function(t){T(n,hi,t)})}catch(r){T(this,hi,r)}}function N(t,e){t.a&&t.a.length||t.b!=fi&&t.b!=hi||A(t),t.a||(t.a=[]),t.a.push(e)}function C(e,n,r,i){var o={$:null,sa:null,ta:null};return o.$=new S(function(e,a){o.sa=n?function(t){try{var r=n.call(i,t);e(r)}catch(o){a(o)}}:e,o.ta=r?function(n){try{var o=r.call(i,n);!t(o)&&n instanceof P?a(n):e(o)}catch(s){a(s)}}:a}),o.$.c=e,N(e,o),o.$}function T(t,e,n){if(t.b==li){if(t==n)e=hi,n=new TypeError("Promise cannot resolve to itself");else{if(g(n))return t.b=1,void n.then(t.g,t.h,t);if(u(n))try{var r=n.then;if(s(r))return void O(t,n,r)}catch(i){e=hi,n=i}}t.f=n,t.b=e,A(t),e!=hi||n instanceof P||j(t,n)}}function O(t,e,n){function r(e){o||(o=!0,t.h(e))}function i(e){o||(o=!0,t.g(e))}t.b=1;var o=!1;try{n.call(e,i,r)}catch(a){r(a)}}function A(t){t.e||(t.e=!0,x(t.j,t))}function q(t){for(;t&&t.d;t=t.c)t.d=!1}function j(t,e){t.d=!0,x(function(){t.d&&pi.call(null,e)})}function P(t){m.call(this,t)}function D(t,e){var n=R(t,e,void 0);return 0>n?null:i(t)?t.charAt(n):t[n]}function R(t,e,n){for(var r=t.length,o=i(t)?t.split(""):t,a=0;r>a;a++)if(a in o&&e.call(n,o[a],a,t))return a;return-1}function I(t){if(!n(t))for(var e=t.length-1;e>=0;e--)delete t[e];t.length=0}function M(t){var e=t.length;if(e>0){for(var n=Array(e),r=0;e>r;r++)n[r]=t[r];return n}return[]}function F(t,e){if(!r(t)||!r(e)||t.length!=e.length)return!1;for(var n=t.length,i=L,o=0;n>o;o++)if(!i(t[o],e[o]))return!1;return!0}function L(t,e){return t===e}/*
 Portions of this code are from MochiKit, received by
 The Closure Authors under the MIT license. All other code is Copyright
 2005-2009 The Closure Authors. All Rights Reserved.
*/
function _(t,e){this.h=[],this.I=e||null,this.b=this.c=!1,this.e=void 0,this.Q=this.u=this.j=!1,this.g=0,this.d=null,this.o=0}function B(t,e,n){t.c=!0,t.e=n,t.b=!e,t.oa()}function H(t){if(t.c){if(!t.Q)throw new z;t.Q=!1}}function U(t,e,n,r){return t.h.push([e,n,r]),t.c&&t.oa(),t}function W(t,e){t.s(e instanceof _?f(e.fb,e):function(){return e})}function V(t){return mi(t.h,function(t){return s(t[1])})}function z(){m.call(this)}function K(t){this.da=ei.setTimeout(f(this.b,this),0),this.a=t}function G(t){var e=yi[t];e&&(ei.clearTimeout(e.da),delete yi[t])}function J(t){m.call(this,t),this.name="ydn.error.ArgumentException"}function X(t){m.call(this,t),this.name="ydn.error.NotSupportedException"}function Y(t){m.call(this,t),this.name="ydn.error.NotImplementedException"}function Q(t){m.call(this,t),this.name="ydn.error.InvalidOperationException"}function Z(t){Error.captureStackTrace?Error.captureStackTrace(this,Z):this.stack=Error().stack||"",t&&(this.message=String(t)),this.name="ydn.error.InternalError"}function te(e,n){for(var i=r(n),o=i?n:arguments,i=i?0:1;i<o.length&&(e=e[o[i]],t(e));i++);return e}function ee(t){return-1!=bi.indexOf(t)}function ne(){}function re(){}function ie(t,e){_.call(this,0,e),this.f=[]}function oe(e,n){var o,a;for(2==arguments.length&&i(arguments[1])?(o=!0,a=arguments[1].split(".")):a=(o=r(n))?n:arguments,o=o?0:1;o<a.length&&(e=e[a[o]],t(e));o++);return e}function ae(t,e,n){if(t)if(-1==e.indexOf("."))t[e]=n;else{e=e.split(".");for(var r,i=e.pop();r=e.shift();)u(t[r])||(t[r]={}),t=t[r];t[i]=n}}function se(t){var e=[t];t=new pe;for(var n,r,i=0;void 0!==(r=e.pop());){if(0===i%4&&i+4>12&&(t.write(i),i=0),n=typeof r,r instanceof Array){if(i+=4,0<r.length){for(e.push(ji),n=r.length;n--;)e.push(r[n]);continue}t.write(i)}else if("number"===n)i+=1,t.write(i),ue(t,r);else if(r instanceof Date)i+=2,t.write(i),ue(t,r.valueOf());else if("string"===n){for(i+=3,t.write(i),i=t,n=0;n<r.length;n++){var o=r.charCodeAt(n);126>=o?i.write(o+1):16510>=o?(o-=127,i.write(128|o>>8,255&o)):i.write(192|o>>10,o>>2|255,(3|o)<<6)}i.write(0)}else{if(r!==ji)return"";t.write(0)}i=0}for(e=t.a.length;"00"===t.a[--e];);return t.a.length=++e,t.toString()}function ue(t,e){var n,r,i;n=e;var o=i=r=0;if(0!==n)if(isFinite(n)){if(0>n&&(r=1,n=-n),o=0,n>=2.2250738585072014e-308){for(i=n;1>i;)o--,i*=2;for(;i>=2;)o++,i/=2;i=o+1023}o=Math.floor(i?4503599627370496*(n/Math.pow(2,o)-1):n/5e-324)}else i=2047,isNaN(n)?o=0x8000000000000:-1/0===n&&(r=1);n=r,r=i,i=o,n&&(i=0xfffffffffffff-i,r=2047-r),t.write((n?0:128)|r>>4),t.write((15&r)<<4|0|i/281474976710656),i%=281474976710656,n=0|i/4294967296,t.write(n>>8,255&n),i%=4294967296,n=0|i/65536,t.write(n>>8,255&n),n=i%65536,t.write(n>>8,255&n)}function ce(t){var e=0|he(t),n=e>>7?!1:!0,r=n?-1:1,i=(127&e)<<4,e=0|he(t),i=i+(e>>4);n&&(i=2047-i);for(var e=[n?15-(15&e):15&e],o=6;o--;)e.push(n?255-(0|he(t)):0|he(t));for(t=0,o=7;o--;)t=t/256+e[o];return t/=16,0===t&&0===i?0:(t+1)*Math.pow(2,i-1023)*r}function le(t){for(var e,n,r=[],i=0,o=0,a=0;e=he(t),0!==e&&null!=e;)0===i?(n=e>>6,2>n&&!isNaN(e)?r.push(String.fromCharCode(e-1)):(i=n,o=e<<10,a++)):2===i?(r.push(String.fromCharCode(o+e+127)),i=o=a=0):2===a?(o+=e<<2,a++):(r.push(String.fromCharCode(o|e>>6)),i=o=a=0);return r.join("")}function fe(t){this.a=null,this.b=t,this.c=this.b.length-1,this.index=-1}function he(t){return t.a=t.index<t.c?parseInt(t.b[++t.index]+t.b[++t.index],16):null}function pe(){this.a=[],this.b=void 0}function de(t,e){var n=se(t),r=se(e);return n>r?1:n==r?0:-1}function ve(t,e,n){ie.call(this,0,n),this.m=t,this.f=[],this.l=[],this.X=[],this.a=null,this.S="",this.B=0}function ge(t,e,n){if(t.a=e,t.S=n,e){for(n=0;n<t.l.length;n++)t.l[n][0].call(t.l[n][1],e);t.l.length=0}}function me(t){var e=new ve(t.m);return t.B++,ge(e,t.a,t.S+"C"+t.B),e}function ye(t,e,n){var r=t.X.shift();n=!!n,r?r[0].call(r[1],e,n,function(e,n){ye(t,e,n)}):n?t.i(e):t.callback(e)}function be(t,e,n){t.X.push([e,n])}function we(t,e,n){t.a?e.call(n,t.a):t.l.push([e,n])}function $e(t){var e="";return t.S&&(e=t.a?"*":"",e="["+t.S+e+"]"),t.m+e}function xe(t,e){var n=new ve(t);return ye(n,e),n}function Ee(){0!=Ri&&(this[ni]||(this[ni]=++ri))}function ke(t,e){this.type=t,this.target=e}function Se(t,e){ke.call(this,t,e)}function Ne(t,e,n,r,i){ke.call(this,t,e),this.version=n,this.Wa=r,this.Ka=i}function Ce(t,e,n){ke.call(this,n||"error",t),this.error=e}function Te(t,e){Ce.call(this,t,e,"fail")}function Oe(e,n,r){var i;if(u(e))i=e.store,n=e.id,null!=e.parent&&(r=new Oe(e.parent));else if(t(n))i=e;else if(i=e.lastIndexOf("^|"),n=e,i>0&&(n=e.substr(i),r=new Oe(e.substring(0,i))),n=n.split("^:"),i=n[0],n=n[1],!t(n))throw Error("Invalid key value: "+e);this.b=i,this.a=n,this.c=r||null}function Ae(t){return n(t.a)?t.a.join("^|"):t.a instanceof Date?+t.a:t.a}function qe(t){if(r(t)){for(var e=[],n=0,i=t.length;i>n;n++)e[n]=t[n];return e}return t}function je(t,e,n,r){this.lower=t,this.upper=e,this.lowerOpen=!!n,this.upperOpen=!!r}function Pe(t){return Re(t)}function De(t){var e;if(n(t))e=M(t),e.push("\uffff");else if(i(t))e=t+"\uffff";else{if(!a(t))return je.only(t);e=t+2.220460492503131e-16,t-=2.220460492503131e-16}return je.bound(t,e,!1,!0)}function Re(t){return null!=t?null!=t.upper&&null!=t.lower?Ii.bound(t.lower,t.upper,!!t.lowerOpen,!!t.upperOpen):null!=t.upper?Ii.upperBound(t.upper,t.upperOpen):null!=t.lower?Ii.lowerBound(t.lower,t.lowerOpen):null:null}function Ie(t,e){var n=t.lower,r=t.upper,i=t.lowerOpen,o=t.upperOpen;return null!=e.lower&&(null==t.lower||e.lower>=t.lower)&&(n=e.lower,i=e.lowerOpen||t.lowerOpen),null!=e.upper&&(null==t.upper||e.upper<=t.upper)&&(r=e.upper,o=e.upperOpen||t.upperOpen),je.bound(n,r,i,o)}function Me(t,e,n,r,i){if(n)if(n.lowerOpen||n.upperOpen||null==n.lower||null==n.upper||0!==Pi(n.lower,n.upper)){if(null!=n.lower){var o=n.lowerOpen?" > ":" >= ";r.push(t+o+"?"),i.push(_e(n.lower,e))}null!=n.upper&&(o=n.upperOpen?" < ":" <= ",r.push(t+o+"?"),i.push(_e(n.upper,e)))}else r.push(t+" = ?"),i.push(_e(n.lower,e))}function Fe(e,n,r,i){var o,a,s,u;if("starts"==e||"^"==e)return De(n);if("<"==e||"<="==e)o=n,s="<"==e;else if(">"==e||">="==e)a=n,u=">"==e;else{if("="!=e&&"=="!=e)throw new J("invalid op: "+e);o=a=n}if("<"==r||"<="==r)o=i,s="<"==r;else if(">"==r||">="==r)a=i,u=">"==r;else if(t(r))throw new J("invalid op2: "+r);return je.bound(a,o,u,s)}function Le(e,o,a,s,u,c){if(t(u)||(u=n(e)?e.join(", "):e),null!=e&&!i(e)&&!r(e))throw new J("index keyPath for "+u+" must be a string or array, but "+e+" is "+typeof e);if(!t(e)&&t(u)&&(e=u),this.keyPath=e,this.f=r(this.keyPath),this.a=u,this.type=He(o),t(o)){if(!t(this.type))throw new J("type invalid in index: "+this.a);if(n(this.keyPath))throw new J('composite key for store "'+this.a+'" must not specified type')}this.unique=!!a,this.multiEntry=!!s,this.g=i(this.type)?this.type:Mi,this.d=i(u)?u:n(e)?this.keyPath.join(","):e,this.c=b(this.d),this.b=this.f?null:this.keyPath.split("."),this.e=c||null}function _e(t,e){return"DATE"!=e?null!=e?t:se(t):t instanceof Date?+t:void 0}function Be(e,n){var r;if("DATE"==n)r=new Date(e);else if(t(n))r=e;else{for(var i,o,a,s=r=[],u=[],c=new fe(e);null!=he(c);)if(0===c.a)s=u.pop();else{if(null===c.a)break;for(;;){o=c.a/4|0,i=c.a%4;for(var l=0;o>l;l++)a=[],s.push(a),u.push(s),s=a;if(!(0===i&&12<c.a+4))break;he(c)}1===i?s.push(ce(c)):2===i?s.push(new Date(ce(c))):3===i?s.push(le(c)):0===i&&(s=u.pop())}r=r[0]}return r}function He(t){return i(t)?(t=vi(Fi,t),Fi[t]):void 0}function Ue(t,e){return null!=t||null!=e?null!=t?null!=e?r(t)&&r(e)?F(t,e)?null:"expect: "+t+", but: "+e:Nn(t,e)?null:"expect: "+t+", but: "+e:"keyPath: "+t+" no longer defined":"newly define "+e:null}function We(e,o,a,s,u,c,l){if(!i(e))throw new J("store name must be a string");if(this.d=e,this.keyPath=t(o)?o:null,this.g=r(this.keyPath),null!==this.keyPath&&!i(this.keyPath)&&!this.g)throw new J("keyPath must be a string or array");this.b=!!a;var f;if(null!=s){if(f=He(s),!t(f))throw new J('type "'+s+'" for primary key in store "'+this.d+'" is invalid.');if(this.g)throw new J('composite key for store "'+this.d+'" must not specified type')}this.type=null!=f?f:this.b?"INTEGER":void 0,this.f=i(this.keyPath)?this.keyPath.split("."):[],this.a=u||[],this.L=!!c,this.P=!!l,this.j=i(this.type)?this.type:Mi,this.e=n(this.keyPath)?this.keyPath.join(","):i(this.keyPath)?this.keyPath:"_ROWID_",this.c=b(this.e),this.h=[]}function Ve(e){var r=[],i=e.indexes||[];if(n(i))for(var o=0;o<i.length;o++){var a;a=i[o],a=new Le(a.keyPath,a.type,a.unique,a.multiEntry,a.name,a.generator),t(a.keyPath)&&a.keyPath===e.keyPath||r.push(a)}return new We(e.name,e.keyPath,e.autoIncrement,"undefined"===e.type||"null"===e.type?void 0:e.type,r,e.dispatchEvents,e.fixed)}function ze(t,e,n,r,i,o,a){return t=Ke(t,e,n,r,i,o,a),e="",0!=n&&(e+="SELECT "+t.select),e+=" FROM "+t.A,t.k&&(e+=" WHERE "+t.k),t.group&&(e+=" GROUP BY "+t.group),t.C&&(e+=" ORDER BY "+t.C),e}function Ke(t,e,n,r,o,a,s){var u={select:"",A:"",k:"",group:"",C:""},c=t.e,l=t.c,f=null;r!==c&&i(r)&&(f=Xe(t,r));var h=!!f,p=r||c,d=b(p),v=h?f.type:t.type,g=h&&f.multiEntry;return u.A=Ze(t),6===n?u.select="COUNT("+l+")":3===n||1===n||2===n?(u.select=l,null!=r&&r!=c&&(u.select+=", "+d)):u.select="*",r=s?"DISTINCT ":"",c=[],g?(g=b("ydn.db.me:"+t.getName()+":"+f.getName()),u.select=6===n?"COUNT("+r+g+"."+d+")":3===n||1===n||2===n?"DISTINCT "+Ze(t)+"."+l+", "+g+"."+d+" AS "+p:"DISTINCT "+Ze(t)+".*, "+g+"."+d+" AS "+p,u.A=g+" INNER JOIN "+Ze(t)+" USING ("+l+")",null!=o&&(Me(g+"."+d,v,o,c,e),0<c.length&&(u.k=u.k?u.k+(" AND "+c.join(" AND ")):c.join(" AND ")))):null!=o&&(Me(d,v,o,c,e),0<c.length&&(u.k=u.k?u.k+(" AND "+c.join(" AND ")):c.join(" AND "))),h&&!f.unique&&s&&(u.group=d),t=a?"DESC":"ASC",u.C=d+" "+t,h&&(u.C+=", "+l+" "+t),u}function Ge(t,e,n,r,i,o,a,s,u){var c,l,f,h;return null!=i?(c=i.lower,l=i.upper,f=i.lowerOpen,h=i.upperOpen,o?null!=l?(i=Pi(s,l),-1==i?(l=s,h=u):0==i&&(h=u||h)):(l=s,h=u):null!=c?(i=Pi(s,c),1==i?(c=s,f=u):0==i&&(f=u||f)):(c=s,f=u)):o?(l=s,h=u):(c=s,f=u),i=new je(c,l,!!f,!!h),r=r?Xe(t,r):null,e=Ke(t,n,e,r?r.d:t.e,i,o,a),e="SELECT "+e.select+" FROM "+e.A+(e.k?" WHERE "+e.k:"")+(e.group?" GROUP BY "+e.group:"")+" ORDER BY "+e.C,r&&(e+=", "+t.c+(o?"DESC":"ASC")),e}function Je(t,e,n,r,i,o,a,s,u,c){var l=Xe(t,r),f=l.d;r=l.c;var h=t.c,p=u?" <":" >",p=a?p+" ":p+"= ";return a=_e(o,l.type),s=_e(s,t.type),l="",i?(t=Ke(t,n,e,f,i,u,c),t.k+=" AND ",l=r+p+"?",n.push(a)):(i=u?je.upperBound(o,!0):je.lowerBound(o,!0),t=Ke(t,n,e,f,i,u,c),l=t.k,t.k=""),t.k+="("+l+" OR ("+r+" = ? AND "+h+p+"?))",n.push(a),n.push(s),"SELECT "+t.select+" FROM "+t.A+" WHERE "+t.k+(t.group?" GROUP BY "+t.group:"")+" ORDER BY "+t.C}function Xe(t,e){return D(t.a,function(t){return t.getName()==e})}function Ye(t,e){for(var n=0;n<t.a.length;n++)if(!Ue(t.a[n].keyPath,e))return t.a[n];return null}function Qe(t,e){return e===t.keyPath?!0:mi(t.a,function(t){return t.getName()==e})}function Ze(t){return b(t.d)}function tn(e,r){if(!r)return e;var o=e.b,a=n(e.keyPath)?M(e.keyPath):e.keyPath,s=e.type,u=gi(e.a,function(t){return t.clone()});t(r.type)||"TEXT"!=s||(s=void 0),n(r.keyPath)&&i(a)&&a==r.keyPath.join(",")&&(a=M(r.keyPath));for(var c=0,l=r.a.length;l>c;c++)if(r.a[c].f)for(var f=r.a[c].getName(),h=u.length-1;h>=0;h--)if(0<=f.indexOf(u[h].getName())){u[h]=r.a[c].clone();break}for(c=0;c<u.length;c++)(l=Xe(r,u[c].getName()))&&(u[c]=u[c].hint(l));return new We(r.d,a,o,s,u)}function en(t){return!!t.keyPath}function nn(t,e,n){if(e){if(!t.keyPath&&null!=n)return n;if(t.g){n=[];for(var r=0;r<t.keyPath.length;r++)n.push(oe(e,t.keyPath[r]));return n}if(t.keyPath)return te(e,t.f)}}function rn(e,n,r){for(var i=0;i<e.f.length;i++){var o=e.f[i];if(i==e.f.length-1){n[o]=r;break}t(n[o])||(n[o]={}),n=n[o]}}function on(e,n,o){var a=[],s=[];o=t(o)?o:nn(e,n),t(o)&&(s.push(e.c),a.push(_e(o,e.type)));for(var u=0;u<e.a.length;u++){var c=e.a[u];if(!c.multiEntry&&c.getName()!==e.keyPath&&"_default_"!=c.getName()){var l;l=c;var f=n;if(null!=f)if(r(l.keyPath)){for(var h=[],p=0,d=l.keyPath.length;d>p;p++){var v=oe(f,l.keyPath[p]);h[p]=v}l=h}else l=oe(f,l.keyPath);else l=void 0;null!=l&&(a.push(_e(l,c.type)),s.push(c.c))}}for(e.P?e.P&&!e.keyPath&&0==e.a.length&&(a.push(i(n)&&-1==n.indexOf(";base64,")?n:fn(n)),s.push("_default_")):(a.push(fn(n)),s.push("_default_")),e=[],u=a.length-1;u>=0;u--)e[u]="?";return{Fa:s,Ra:e,w:a,key:o}}function an(e,n){if(!n)return"missing store: "+e.d;if(e.d!=n.d)return"store name, expect: "+e.d+", but: "+n.d;var i=Ue(e.keyPath,n.keyPath);if(i)return"keyPath, "+i;if(t(e.b)&&t(n.b)&&e.b!=n.b)return"autoIncrement, expect:  "+e.b+", but: "+n.b;if(e.a.length!=n.a.length)return"indexes length, expect:  "+e.a.length+", but: "+n.a.length;if(t(e.type)&&t(n.type)&&(r(e.type)?!F(e.type,n.type):e.type!=n.type))return"data type, expect:  "+e.type+", but: "+n.type;for(i=0;i<e.a.length;i++){var o,a=Xe(n,e.a[i].getName());if(o=e.a[i],a)if(o.a!=a.a)o="name, expect: "+o.a+", but: "+a.a;else{var s=Ue(o.keyPath,a.keyPath);o=s?"keyPath, "+s:null!=o.unique&&null!=a.unique&&o.unique!=a.unique?"unique, expect: "+o.unique+", but: "+a.unique:null!=o.multiEntry&&null!=a.multiEntry&&o.multiEntry!=a.multiEntry?"multiEntry, expect: "+o.multiEntry+", but: "+a.multiEntry:t(o.type)&&t(a.type)&&(r(o.type)?!F(o.type,a.type):o.type!=a.type)?"data type, expect: "+o.type+", but: "+a.type:""}else o="no index for "+o.a;if(0<o.length)return'index "'+e.a[i].getName()+'" '+o}return""}function sn(t,e){if(e)for(var r=0;r<t.a.length;r++){var i=t.a[r],o=e;if(i.e){var a=i.e(o),s=typeof a;if("string"==s||"number"==s||a instanceof Date||n(a)){for(s=0;s<i.b.length-1;s++)u(o[i.b[s]])||(o[i.b[s]]={});o[i.b[i.b.length-1]]=a}}}}function un(t,e,n,r,i){for(var o=0;o<t.h.length;o++)r!==o&&t.h[o].call(i,e,n)}function cn(t){return!i(t)||/^[\s\xa0]*$/.test(t)?{}:JSON.parse(t)}function ln(t){var e;try{e=fn(t)}catch(n){e=""}return e?e.substr(0,70)+(70<e.length?"...":""):""}function fn(t){return JSON.stringify(t,void 0,void 0)}function hn(t){this.a=t}function pn(t,e){this.name=t,this.a=e}function dn(t){if(!n(t.sources))throw new J("indexes require for full text search index "+t.name+", but "+t.sources+" of type "+typeof t.sources+" found.");var e=t.sources.map(function(t){return new hn(t.storeName)});return new pn(t.name,e)}function vn(e,r){var o,s,c=r;if(u(e)){s=e,o=s.version;for(var c=[],l=s.stores||[],f=0;f<l.length;f++){var h=Ve(l[f]);c.push(h)}}else i(e)?o=0==e.length?void 0:parseFloat(e):a(e)&&(o=e);if(t(o)){if(!a(o)||0>o)throw new J("Invalid version: "+o+" ("+e+")");isNaN(o)&&(o=void 0)}if(t(r)&&(!n(r)||0<r.length&&!(r[0]instanceof We)))throw new J("stores");if(this.version=o,this.b=!t(this.version),this.stores=c||[],o=[],s&&s.fullTextCatalogs)for(f=0;f<s.fullTextCatalogs.length;f++)c=dn(s.fullTextCatalogs[f]),o[f]=c,mn(this,c.getName())||(l=[new Le("k",Mi),new Le("v",Mi)],c=new We(c.getName(),"id",!1,void 0,l,!1,!1),this.stores.push(c));this.c=o}function gn(t){return gi(t.stores,function(t){return t.getName()})}function mn(t,e){return D(t.stores,function(t){return t.getName()==e})}function yn(t,e){return mi(t.stores,function(t){return t.getName()==e})}function bn(t,e,n,r){if(!e||t.stores.length!=e.stores.length)return"Number of store: "+t.stores.length+" vs "+e.stores.length;for(var i=0;i<t.stores.length;i++){var o=mn(e,t.stores[i].getName());if(!o)return'missing object store "'+t.stores[i].getName()+'"';if(n&&(o=tn(o,t.stores[i])),r)for(var a=o,s=t.stores[i],u=0;u<s.a.length;u++){var c=s.a[u];Qe(a,c.getName())||"BLOB"!=c.type||(c=new Le(c.keyPath,c.type,c.unique,c.multiEntry,c.getName()),a.a.push(c))}if(o=an(t.stores[i],o),0<o.length)return'store: "'+t.stores[i].getName()+'" '+o}return""}function wn(t,e){vn.call(this,t,e)}function $n(t,e){t.stores.push(e)}function xn(t){Error.captureStackTrace?Error.captureStackTrace(this,xn):this.stack=Error().stack||"",t&&(this.message=String(t)),this.name="ydn.error.InternalError"}function En(t){Error.captureStackTrace?Error.captureStackTrace(this,En):this.stack=Error().stack||"",t&&(this.message=String(t)),this.name="ydn.error.ConstraintError"}function kn(t){Error.captureStackTrace?Error.captureStackTrace(this,kn):this.stack=Error().stack||"",t&&(this.message=String(t)),this.name="ydn.error.InvalidOperationException"}function Sn(t){Error.captureStackTrace?Error.captureStackTrace(this,Sn):this.stack=Error().stack||"",t&&(this.message=String(t)),this.name="ydn.error.InvalidOperationError"}function Nn(t,e){var n;if(n=n||{},null!=t&&null!=e){if(r(t)&&r(e)){if(t.length!=e.length)return!1;for(var i=0;i<t.length;i++)if(-1==D(e,function(e){return Nn(e,t[i])}))return!1;return!0}if(r(t))return 1==t.length&&Nn(t[0],e);if(r(e))return 1==e.length&&Nn(e[0],t);if(u(t)&&u(t)){for(var o in t)if(t.hasOwnProperty(o)&&!n[o]){var a=Nn(t[o],e[o]);if(!a)return!1}for(o in e)if(e.hasOwnProperty(o)&&!n[o]&&(a=Nn(t[o],e[o]),!a))return!1;return!0}return t===e}return!1}/*
 Copyright 2012 YDN Authors, Yathit. All Rights Reserved.
 Licensed under the Apache License, Version 2.0 (the "License");.
*/
function Cn(e,n,r){r=r||{},this.l=r.mechanisms||Li,this.j=r.size,this.m=t(r.connectionTimeout)?r.connectionTimeout:6e4,this.a=null,this.e=[],this.ea=!1;var i;if(n instanceof vn)i=n;else if(u(n)){i=r.autoSchema||!t(n.stores)?new wn(n):new vn(n);var o=n.stores?n.stores.length:0;for(r=0;o>r;r++)mn(i,n.stores[r].name)}else i=new wn;for(this.b=i,r=0;r<this.b.count();r++);t(e)&&this.h(e),this.d=new _}function Tn(t,e){var n=e instanceof We?e:Ve(e),r=mn(t.b,e.name);if(0==an(n,r).length)(new _).callback(!1);else{if(!(t.b instanceof wn))throw new En("");$n(t.b,n),t.a?(t.a.close(),t.a=null,On(t)):(new _).callback(!1)}}function On(t){function e(e,i){e?(t.Ha=0/0,r.Va=function(){},r.ya=function(){t.a=null},r.La=function(){},setTimeout(function(){An(t,i),jn(t)},10),n.callback(i)):(setTimeout(function(){if(An(t,new Te(t,i)),t.e)for(var e;e=t.e.shift();)e.t&&e.t("error",i)},10),n.i(i))}for(var n=new _,r=null,i=t.l,o=0;o<i.length;o++){var a=i[o].toLowerCase();if(r=t.ma(a)){r=t.ma(a);break}}null===r?(i=new En("No storage mechanism found."),e(!1,new Te(t,i))):U(r.wa(t.f,t.b),function(t){this.a=r,e(!0,new Ne("ready",this,parseFloat(r.Ua()),parseFloat(t),null))},function(t){e(!1,t)},t)}function An(t,e){setTimeout(function(){t.b.b&&t.d.c||(e instanceof Ce?t.d.i(e.error):t.d.callback())},4)}function qn(t){return!!t.a&&t.a.xa()}function jn(t){var e=t.e.shift();e&&t.transaction(e.ca,e.gb,e.mode,e.t),t.Ha=ii()}function Pn(t,e,n,r){Ee.call(this),this.a=n,this.ua=n.getName(),this.g=void 0,this.e=!1,this.O=null,this.j=t,this.l=this.h=!1,this.B=r||4,this.Q=this.f=this.c=void 0,this.o=function(){throw new Z},this.I=function(){throw new Z},this.X=function(){}}function Dn(t,e){t.I(e),Rn(t),t.h=!0}function Rn(t){t.f=null!=t.f?qe(t.f):void 0,t.c=null!=t.c?qe(t.c):void 0,t.X(t.l,t.c,t.f)}function In(t){t.l=!0,Rn(t)}function Mn(){}function Fn(e,n,r,o,a,s,u){this.b=e,this.d=n,this.j=u,this.l=!!this.d,this.c=t(s)?s:!!i(this.d),e="next",o&&a?e="prevunique":o?e="prev":a&&(e="nextunique"),this.f=e,this.a=Re(r),this.e=_i,this.m=0/0}function Ln(t,e,n){return t=new Fn(t.b,t.d,t.a,_n(t),Bn(t),t.c,t.j),t.g=e,t.h=n,t.e="rest",t}function _n(t){return"prev"===t.f||"prevunique"===t.f}function Bn(t){return"nextunique"===t.f||"prevunique"===t.f}function Hn(t,e,n,r){e=e||_i,"busy"!=t.e&&(t.g=n,t.h=r,t.e=e)}function Un(t){this.b=t||null,this.a=!1}function Wn(t,e){var n;for(t.a=_n(e[0]),n=0;n<e.length;n++);return!1}function Vn(t){Error.captureStackTrace?Error.captureStackTrace(this,Vn):this.stack=Error().stack||"",t&&(this.message=String(t)),this.name="ConstraintError"}function zn(t){Error.captureStackTrace?Error.captureStackTrace(this,zn):this.stack=Error().stack||"",t&&(this.message=String(t)),this.name="InvalidStateError"}function Kn(t){Error.captureStackTrace?Error.captureStackTrace(this,Kn):this.stack=Error().stack||"",t&&(this.message=String(t)),this.name="InvalidAccessError"}function Gn(t){Error.captureStackTrace?Error.captureStackTrace(this,Gn):this.stack=Error().stack||"",t&&(this.message=String(t)),this.name="NotFoundError"}function Jn(t,e){Error.captureStackTrace?Error.captureStackTrace(this,Jn):this.stack=Error().stack||"",e&&(this.message=String(e)),this.message+=" :"+t.message+" ["+t.code+"]",this.name="SQLError"}function Xn(t,e){Error.captureStackTrace?Error.captureStackTrace(this,Xn):this.stack=Error().stack||"",e&&(this.message=String(e)),this.message+=" :"+t.message,this.name="SecurityError"}function Yn(t){Error.captureStackTrace?Error.captureStackTrace(this,Yn):this.stack=Error().stack||"",t&&(this.message=String(t)),this.name="ydn.db.TimeoutError"}function Qn(t,e){this.a=e}function Zn(t){this.d=t,this.a=null,this.b=0}function tr(t){return!!t.a&&!t.c}function er(t,e,n,r,i,o){this.h=t,this.B=e,this.a=this.d=0,this.u=r,this.o=i,this.f=n||Bi,this.j=o||0}function nr(t){if(!t)throw new zn("No active transaction");if(s(t.abort))t.abort();else{if(!s(t.executeSql))throw new X;t.executeSql("ABORT",[],null,function(){return!0})}}function rr(t,e,n,r,i,o){er.call(this,t,e,n,r,i,o),this.c=[],this.e=[],this.g=null,this.b=new Zn(e),this.l=o||0,this.m=!1}function ir(t,e,n){if("multi"==t.f)t:if(t=t.b,!t.v||!t.mode||n!=t.mode&&(t.mode!=Oi||n!=Ti)||e.length>t.v.length)e=!1;else{for(n=0;n<e.length;n++)if(-1==t.v.indexOf(e[n])){e=!1;break t}e=!0}else if("repeat"==t.f)t:if(t=t.b,t.v&&t.mode&&n==t.mode&&t.v.length==e.length){for(n=0;n<e.length;n++)if(-1==t.v.indexOf(e[n])){e=!1;break t}e=!0}else e=!1;else e="all"==t.f?!0:!1;return e}function or(t){var e=0<t.c.length?t.c[0].v:null,n=0<t.c.length?t.c[0].mode:null;return null!=e&&null!=n?ir(t,e,n):!1}function ar(t,e){rr.call(this,t,e)}function sr(t,e,n){this.c=t,this.b=e,this.a=n,this.d=null}function ur(t){if(!t.d){var e;e=t.c;var n=e.za();if("indexeddb"==n)e=new Sr(0,e.b);else{if("websql"!=n&&"sqlite"!=n)throw new Z("No executor for "+n);e=new Pr(0,e.b)}t.d=e}return t.d}function cr(t,e,n){sr.call(this,t,e,n)}function lr(t,e){var n=i(e)?e:u(e)?e.name:void 0;if(!i(n))throw new J("store name must be a string");var r=mn(t.b,n);if(r){if(t.b.a()&&u(e)){var o=Ve(e);if(o=an(r,o))throw new X(o)}}else{if(!t.b.a())throw new Gn(n);r=Ve(u(e)?e:{name:n}),Tn(t.c,r)}if(!r)throw new Gn(n);return r}function fr(t,e,n){sr.call(this,t,e,n)}function hr(e,r,i){var o,a=Oi||Ti,s=[];for(o=0;o<i.length;o++)for(var c=i[o].stores(),l=0;l<c.length;l++)0<=vi(s,c[l])||s.push(c[l]);return o=e.a.request("qa",s),e.a.K(o,function(o,a,s){function c(){for(var t=0,n=0;n<i.length;n++){var r=i[n],s=[ur(e).b(o,a,r.b)],r=r.load(s);r.I=l,r.o=h(f,t),y[n]=r,v[t]=n,t++}p=i.length}function l(t){for(var e=0;e<y.length;e++)In(y[e]);I(y),s(t,!0)}function f(e,o){if(d)throw new xn;b++;var a=b===p,c=v[e],l=i[c],f=y[c],c=f.G(),f=f.Z();if(g[e]=o,m[e]=l.l?l.c?c:f:l.c?o:f,a){var h;if(h=r instanceof Un?r.c(g,m):r(g,m),a=[],l=[],c=[],f=[],n(h))for(var w=0;w<h.length;w++)!0===h[w]?c[w]=1:!1===h[w]?f[w]=!0:l[w]=h[w];else if(null===h)a=[];else if(t(h)){if(!u(h))throw new Q("scan callback output");a=h.continuePrimary||[],l=h["continue"]||[],c=h.advance||[],f=h.restart||[]}else for(a=[],w=0;w<i.length;w++)t(v[w])&&(c[w]=1);for(w=b=h=0;w<i.length;w++)null!=a[w]||t(l[w])||null!=f[w]||null!=c[w]||b++;for(w=0;w<i.length;w++)if(null!=a[w]||t(l[w])||null!=f[w]||null!=c[w]){var $=v[w];if(!t($))throw new kn(w+" is not an iterator.");var $=i[$],x=y[w];if(g[w]=void 0,m[w]=void 0,null!=f[w])$=x,$.h=!1,$.l=!1,$.openCursor(void 0,void 0);else if(t(l[w]))x.T(l[w]);else if(null!=a[w])x.ia(a[w]);else{if(null==c[w])throw new xn($+": has no action");x.advance(1)}h++}if(0==h){for(h=0;h<y.length;h++)In(y[h]);d=!0,I(y),s(void 0)}}}var p,d=!1,v=[],g=[],m=[],y=[],b=0;r instanceof Un?Wn(r,i)||c():c()},s,a),o}function pr(t,e,n,r){var i=n.b,o=n.d||null,a=r||100,s=t.a.request("u",[i]),u="done"==n.e||n.e==_i?[]:[n.g,n.h];return we(s,function(){ur(this).V(s,e,i,o,n.a?n.a instanceof Ii?n.a:Ii.bound(n.a.lower,n.a.upper,n.a.lowerOpen,n.a.upperOpen):null,a,0,_n(n),Bn(n),u)},t),s.s(function(){null!=u[0]?Hn(n,"rest",u[0],u[1]):Hn(n)}),s}function dr(e,n,r,i,o){var a=[],s=r.a,u=$e(r);e=ur(e);for(var c=[],l=i.stores(),f=0;f<l.length;f++)c[f]=e.b(s,u,l[f]);var h=i.load(c);h.I=function(t){In(h),ye(r,t,!0)};var p=0,d=!1;h.o=function(e){d||(d=!0),null!=e?(h.G(),p++,1==n?a.push(e):2==n?a.push(h.G()):3==n?a.push([e,h.G()]):6!=n&&a.push(h.Z()),5==n?(In(h),ye(r,a[0])):6==n||!t(o)||o>p?h.T():(In(h),ye(r,a))):(In(h),ye(r,5==n?a[0]:6==n?p:a))}}function vr(t,e,n,r){this.d=t,this.a=M(n),this.b=r,this.c=[]}function gr(t,e,n){if(!t.d)throw new Z("tx committed on ParallelTxExecutor");n&&t.c.push(n),e(t.d)}function mr(t,e,n,r,i,o){er.call(this,t,e,n,r,i,o),this.c=this.b=null}function yr(t,e){mr.call(this,t,e,Bi)}function br(e,n,r){Cn.call(this,e,n,r),this.R=0,e=!0,n=Bi,r&&(t(r.isSerial)&&(e=!!r.isSerial),r.policy&&(n=r.policy)),r=wr(this,n,e),this.g=wr(this,"atomic",!1),this.c=this.W(r,this.g)}function wr(t,e,n,r,i,o){if(n){if("multi"==e||"repeat"==e||"all"==e||e==Bi)return new rr(t,t.R++,e,r,i,o);if("atomic"==e)return new ar(t,t.R++);throw new J('Invalid requestType "'+e+'"')}if("multi"==e||"repeat"==e||"all"==e||e==Bi)return new mr(t,t.R++,e,r,i,o);if("atomic"==e)return new yr(t,t.R++);throw new J('Invalid requestType "'+e+'"')}function $r(t,e,n){for(br.call(this,t,e,n),t=this.b,e=0;e<t.c.length;e++){n=t.c[e];var r=mn(t,n.getName());if(!r)throw new J('full text index store "'+n.getName()+'" required.');if(!Qe(r,"k"))throw new J('full text index store "'+r.getName()+'" must have "keyword" index');if(!Qe(r,"v"))throw new J('full text index store "'+r.getName()+'" must have "keyword" index');if("id"!=r.keyPath)throw new J('full text index store "'+r.getName()+'" must use "id" as key path.');for(r=0;r<n.count();r++){var i=n.index(r);if(!mn(t,i.a))throw new J('full text source store "'+i.a+'" does not exist for full text index "'+n.getName()+'"')}}}function xr(t,e,n){$r.call(this,t,e,n)}function Er(t,e,n,r){Pn.call(this,t,0,n,r),this.b=null}function kr(t,e){this.a=e}function Sr(t,e){this.a=e}function Nr(t,e,n,r){Pn.call(this,t,0,n,r),this.u=null,this.b=this.d=void 0}function Cr(e,n){if(e.d=void 0,e.b=void 0,e.m=void 0,t(n))if(u(n)){var r=Be(n[e.a.e],e.a.type);if(e.b=r,e.e){var i=Xe(e.a,e.g);e.d=Be(n[e.g],i.type)}else e.d=r;e.m=e.fa?r:qr(n,e.a)}else e.m=n}function Tr(t,e,n){Xe(t.a,t.g);var r=[],i=t.g,o=t.O,a=t.d;if(null!=o){var s=o.lower,u=o.upper,c=o.lowerOpen,l=o.upperOpen;t.p?u=null!=u&&-1==Pi(u,a)?u:a:s=null!=s&&1==Pi(s,a)?s:a,o=null!=s&&null!=u?je.bound(s,u,!!c,!!l):null!=s?Ii.lowerBound(s,!!c):Ii.upperBound(u,!!l)}else o=t.p?Ii.upperBound(a):Ii.lowerBound(a);i=Ke(t.a,r,t.B,i,o,t.p,t.unique),n=t.p?Ii.upperBound(n,!1):Ii.lowerBound(n,!1),n=Ke(t.a,r,t.B,t.a.e,n,t.p,t.unique),i.k=i.k?i.k+(" AND "+n.k):n.k,n="SELECT "+i.select+" FROM "+i.A+(i.k?" WHERE "+i.k:"")+(i.group?" GROUP BY "+i.group:"")+" ORDER BY "+i.C,n+=" LIMIT 1",ne(t+": continuePrimary:  SQL: "+n+" : "+fn(r)),t.j.executeSql(n,r,function(n,r){0<r.rows.length?Cr(t,r.rows.item(0)):Cr(t),e.call(t,t.d,t.b,t.m),e=null},function(n,r){return Dn(t,r),Cr(t),e.call(t,t.b,t.d,t.m),e=null,!1})}function Or(t,e,n,r,i,o){var a=!r;r=[],t.e&&null!=o&&null!=n?n=Je(t.a,t.B,r,t.u.getName(),t.O,n,a,o,t.p,t.unique):null!=n?n=Ge(t.a,t.B,r,t.u?t.u.getName():null,t.O,t.p,t.unique,n,a):(n=ze(t.a,r,t.B,t.e?t.u.d:t.a.e,t.O,t.p,t.unique),t.e&&(n+=", "+t.a.c+" ASC")),n+=" LIMIT 1",i>0&&(n+=" OFFSET "+i),ne(t+": continue:  SQL: "+n+" : "+fn(r)),t.j.executeSql(n,r,function(n,r){0<r.rows.length?Cr(t,r.rows.item(0)):Cr(t),e.call(t,t.d,t.b,t.m),e=null},function(n,r){return Dn(t,r),Cr(t),e.call(t,t.b,t.d,t.m),e=null,!1})}function Ar(t,e){this.a=e}function qr(e,n){if(n.P&&!n.keyPath&&0==n.a.length&&e._default_){var r=e._default_;if(-1==r.indexOf(";base64,"))return cn(r);'"'==r.charAt(0)&&'"'==r.charAt(r.length-1)&&(r=r.substr(1,r.length-2));for(var i=r.split(";base64,"),r=i[0].split(":")[1],i=window.atob(i[1]),o=i.length,a=new Uint8Array(o),s=0;o>s;++s)a[s]=i.charCodeAt(s);return new Blob([a.buffer],{type:r})}for(r=e._default_?cn(e._default_):{},null!=n.keyPath&&(i=Be(e[n.keyPath],n.type),null!=i&&rn(n,r,i)),i=0;i<n.a.length;i++)if(o=n.index(i),a=o.d,"_default_"!=a&&!o.f&&!o.multiEntry&&("DATE"==o.type||n.P)&&(s=Be(e[a],o.type),t(s)))for(var a=r,c=0;c<o.b.length;c++)c==o.b.length-1?a[o.b[c]]=s:u(a[o.b[c]])||(a[o.b[c]]={});return r}function jr(e,n,r,i,o){function a(t){t="DELETE FROM  "+b("ydn.db.me:"+u.getName()+":"+t.getName())+l,s.executeSql(t,c)}var s=n.a,u=mn(e.a,r);e="DELETE FROM "+Ze(u),r=[];var c=[],l="";for(null!=o&&(t(i)?(i=Xe(u,i),Me(i.c,i.type,o,c,r)):Me(u.c,u.type,o,c,r),l=" WHERE "+c.join(" AND ")),s.executeSql(e+l,r,function(t,e){ye(n,e.rowsAffected)},function(t,e){return ye(n,e,!0),!1}),o=0,i=u.a.length;i>o;o++)e=u.index(o),e.multiEntry&&a(e)}function Pr(t,e){this.a=e}function Dr(t,e){this.n=null,this.Y=e||0/0}function Rr(t,e,n){function r(){var e={autoIncrement:!!n.b};return null!=n.keyPath&&(e.keyPath=n.keyPath),t.createObjectStore(n.getName(),e)}if(t.objectStoreNames.contains(n.getName())){e=e.objectStore(n.getName()),Ue(n.keyPath||"",e.keyPath||"")?(t.deleteObjectStore(n.getName()),e=r()):o(e.autoIncrement)&&o(n.b)&&e.autoIncrement!=n.b&&(t.deleteObjectStore(n.getName()),e=r());for(var i=e.indexNames,a=0;a<n.a.length;a++){var s=n.index(a);!i.contains(s.getName())&&s.e&&e.clear()}for(var u=0,c=0,l=0,a=0;a<n.a.length;a++){var s=n.index(a),f=!1;if(i.contains(s.getName())){var h=e.index(s.getName()),p=null!=h.unique&&null!=s.unique&&h.unique!=s.unique,d=null!=h.multiEntry&&null!=s.multiEntry&&h.multiEntry!=s.multiEntry,h=null!=h.keyPath&&null!=s.keyPath&&!!Ue(h.keyPath,s.keyPath);(p||d||h)&&(e.deleteIndex(s.getName()),f=!0,u--,l++)}else"BLOB"!=s.type&&(f=!0);f&&(s.unique||s.multiEntry?(f={unique:s.unique,multiEntry:s.multiEntry},e.createIndex(s.getName(),s.keyPath,f)):e.createIndex(s.getName(),s.keyPath),u++)}for(a=0;a<i.length;a++)Qe(n,i[a])||(e.deleteIndex(i[a]),c++)}else for(e=r(),a=0;a<n.a.length;a++)s=n.index(a),"BLOB"!=s.type&&(s.unique||s.multiEntry?(f={unique:s.unique,multiEntry:s.multiEntry},e.createIndex(s.getName(),s.keyPath,f)):e.createIndex(s.getName(),s.keyPath))}function Ir(e,n){this.a=t(e)?e:4194304,this.b=n||"websql"}function Mr(t){var e=t.j,n="CREATE TABLE IF NOT EXISTS "+Ze(t)+" (",r=t.c,n=n+(r+" "+e+" PRIMARY KEY ");t.b&&(n+=" AUTOINCREMENT "),(!t.P||!t.keyPath&&0==t.a.length)&&(n+=" ,_default_ BLOB");for(var o=[],a=[r],s=0,u=t.a.length;u>s;s++){var c=t.index(s),l="";if(c.multiEntry)l=c.unique?" UNIQUE ":"",c="CREATE TABLE IF NOT EXISTS "+b("ydn.db.me:"+t.getName()+":"+c.getName())+" ("+r+" "+e+", "+c.c+" "+c.g+l+")",o.push(c);else{c.unique&&(l=" UNIQUE ");var f=c.keyPath;"BLOB"!=c.type&&i(f)&&(f="CREATE "+l+" INDEX IF NOT EXISTS "+b(t.getName()+"-"+c.getName())+" ON "+Ze(t)+" ("+c.c+")",o.push(f)),f=c.c,-1==a.indexOf(f)&&(n+=", "+f+" "+c.g+l,a.push(f))}}return o.unshift(n+")"),o}function Fr(t,e,n,r){function i(e){t.executeSql(e,[],function(){o++,o==a.length&&(n(!0),n=null)},function(t,e){throw o++,o==a.length&&(n(!1),n=null),new Jn(e,'"')})}var o=0,a=Mr(e);if(r){if(0==an(e,r).length)return n(!0),void(n=null);a.unshift("DROP TABLE IF EXISTS "+b(e.getName()))}for(e=0;e<a.length;e++)i(a[e])}function Lr(t,e,n){$r.call(this,t,e,n)}function _r(t,e,n){this.db=t,this.b=e,this.type=n||0,this.c=null}function Br(t){Un.call(this,t)}function Hr(t){Un.call(this,t)}function Ur(t,e,n,r){this.c=t,this.a=e||null,this.f=!!n,this.e=!!r,this.b=[],this.d=[]}function Wr(t,e){for(var n=e.length-1;n>=0&&e[n]==t.b[t.b.length-1];n--)e=e.slice(0,n);return t.d=e,null}function Vr(t,e){if((0!=t.b.length||0!=t.d.length)&&Gr(t)&&!zr(t))throw new Vn('Require index "'+t.b.concat(t.d).join(", ")+'" not found in store "'+t.c.getName()+'"');var n=new Fn(t.c.getName(),Kr(t),t.a,t.f,t.e,!!e);return n.m=t.b.length,n}function zr(t){var e=t.b.concat(t.d),n=Ye(t.c,e);return n||e[e.length-1]==t.c.keyPath&&(n=Ye(t.c,e.slice(0,e.length-1)))?n:null}function Kr(t){return(t=zr(t))?t.getName():void 0}function Gr(t){return 0<t.b.length?!0:1==t.d.length?t.d[0]!=t.c.keyPath:1<t.d.length?!0:!1}function Jr(t,e,n,r){_r.call(this,t,e,n),this.a=r}function Xr(t){for(var e=[],n=0;n<t.a.length;n++)e[n]=Vr(t.a[n]);return e}function Yr(t){for(var e=0;e<t.a.length;e++)if(0<t.a[e].b.length)return!0;return!1}function Qr(t,e,n,r){_r.call(this,t,e,n),this.a=r}function Zr(t){return Vr(t.a,!(2==t.type||3==t.type||1==t.type))}var ti,ei=this,ni="closure_uid_"+(1e9*Math.random()>>>0),ri=0,ii=Date.now||function(){return+new Date};d(m,Error),m.prototype.name="CustomError";var oi,ai={"\x00":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","":"\\x0B",'"':'\\"',"\\":"\\\\"},si={"'":"\\'"},ui=!1,ci=[],li=0,fi=2,hi=3;S.prototype.then=function(t,e,n){return C(this,s(t)?t:null,s(e)?e:null,n)},v(S),S.prototype.g=function(t){this.b=li,T(this,fi,t)},S.prototype.h=function(t){this.b=li,T(this,hi,t)},S.prototype.j=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;e++){var n=t[e],r=this.f;this.b==fi?n.sa(r):(q(this),n.ta(r))}}this.e=!1};var pi=w;d(P,m),P.prototype.name="cancel";var di=Array.prototype,vi=di.indexOf?function(t,e,n){return di.indexOf.call(t,e,n)}:function(t,e,n){if(n=null==n?0:0>n?Math.max(0,t.length+n):n,i(t))return i(e)&&1==e.length?t.indexOf(e,n):-1;for(;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},gi=di.map?function(t,e,n){return di.map.call(t,e,n)}:function(t,e,n){for(var r=t.length,o=Array(r),a=i(t)?t.split(""):t,s=0;r>s;s++)s in a&&(o[s]=e.call(n,a[s],s,t));return o},mi=di.some?function(t,e,n){return di.some.call(t,e,n)}:function(t,e,n){for(var r=t.length,o=i(t)?t.split(""):t,a=0;r>a;a++)if(a in o&&e.call(n,o[a],a,t))return!0;return!1};ti=_.prototype,ti.aa=function(t,e){this.j=!1,B(this,t,e)},ti.callback=function(t){H(this),B(this,!0,t)},ti.i=function(t){H(this),B(this,!1,t)},ti.s=function(t,e){return U(this,t,null,e)},ti.Ca=function(t,e){return U(this,null,t,e)},ti.Ba=function(t,e){return U(this,t,t,e)},ti.then=function(t,e,n){var r,i,o=new S(function(t,e){r=t,i=e});return U(this,r,function(t){i(t)}),o.then(t,e,n)},v(_),_.prototype.fb=function(t){var e=new _;return U(this,e.callback,e.i,e),t&&(e.d=this,this.o++),e},_.prototype.oa=function(){this.g&&this.c&&V(this)&&(G(this.g),this.g=0),this.d&&(this.d.o--,delete this.d);for(var e=this.e,n=!1,r=!1;this.h.length&&!this.j;){var i=this.h.shift(),o=i[0],a=i[1],i=i[2];if(o=this.b?a:o)try{var s=o.call(i||this.I,e);t(s)&&(this.b=this.b&&(s==e||s instanceof Error),this.e=e=s),g(e)&&(this.j=r=!0)}catch(u){e=u,this.b=!0,V(this)||(n=!0)}}this.e=e,r&&(r=f(this.aa,this,!0),s=f(this.aa,this,!1),e instanceof _?(U(e,r,s),e.u=!0):e.then(r,s)),n&&(e=new K(e),yi[e.da]=e,this.g=e.da)},d(z,m),z.prototype.message="Deferred has already fired",z.prototype.name="AlreadyCalledError",K.prototype.b=function(){throw delete yi[this.da],this.a};var yi={};d(J,m),d(X,m),d(Y,m),d(Q,m),d(Z,Error),Z.prototype.name="ydn.error.InternalError";var bi;t:{var wi=ei.navigator;if(wi){var $i=wi.userAgent;if($i){bi=$i;break t}}bi=""}var xi=ee("Opera")||ee("OPR"),Ei=ee("Trident")||ee("MSIE"),ki=ee("Gecko")&&-1==bi.toLowerCase().indexOf("webkit")&&!(ee("Trident")||ee("MSIE")),Si=-1!=bi.toLowerCase().indexOf("webkit");!function(){var t,e="";return xi&&ei.opera?(e=ei.opera.version,s(e)?e():e):(ki?t=/rv\:([^\);]+)(\)|;)/:Ei?t=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:Si&&(t=/WebKit\/(\S+)/),t&&(e=(e=t.exec(bi))?e[1]:""),Ei&&(t=(t=ei.document)?t.documentMode:void 0,t>parseFloat(e))?String(t):e)}(),d(ie,_),ie.prototype.ua=function(t,e){return this.f.push([t,e]),this},ie.prototype.callback=function(t){this.f.length=0,ie.r.callback.call(this,t)},ie.prototype.i=function(t){this.f.length=0,ie.r.i.call(this,t)},ie.prototype.hb=function(){return this};var Ni={READ_ONLY:"readonly",READ_WRITE:"readwrite",VERSION_CHANGE:"versionchange"},Ci=ei.IDBRequest&&"LOADING"in ei.IDBRequest?ei.IDBTransaction:ei.webkitIDBRequest&&"LOADING"in ei.webkitIDBRequest&&1===ei.webkitIDBTransaction.READ_WRITE?ei.webkitIDBTransaction:Ni,Ti=Ci.READ_ONLY,Oi=Ci.READ_WRITE,Ai=Ci.VERSION_CHANGE,qi=ei.indexedDB||ei.mozIndexedDB||ei.webkitIndexedDB||ei.moz_indexedDB||ei.msIndexedDB;_.prototype.done=_.prototype.s,_.prototype.fail=_.prototype.Ca,_.prototype.always=_.prototype.Ba,ie.prototype.then=ie.prototype.then;var ji={};pe.prototype.write=function(){for(var t=0;t<arguments.length;t++)this.b=arguments[t].toString(16),this.a.push(2===this.b.length?this.b:this.b="0"+this.b)},pe.prototype.toString=function(){return this.a.length?this.a.join(""):""},d(ve,ie),ti=ve.prototype,ti.S="",ti.Za=function(){return!!this.a},ti.abort=function(){if(!this.a)throw new zn("");if(s(this.a.abort))this.a.abort();else{if(!s(this.a.executeSql))throw new X;this.a.executeSql("ABORT",[],function(){},function(){return!0})}},ti.callback=function(t){ve.r.callback.call(this,t)},ti.i=function(t){ve.r.i.call(this,t)},ti.toString=function(){return"Request:"+$e(this)},ti.oa=function(){this.g&&this.c&&V(this)&&(G(this.g),this.g=0),this.d&&(this.d.o--,delete this.d);for(var e=this.e,n=!1;this.h.length&&!this.j;){var r=this.h.shift(),i=r[0],o=r[1],r=r[2];(i=this.b?o:i)&&(i=i.call(r||this.I,e),t(i)&&(this.b=this.b&&(i==e||i instanceof Error),this.e=e=i),g(e)&&(this.j=n=!0))}this.e=e,n&&(n=f(this.aa,this,!0),i=f(this.aa,this,!1),e instanceof _?(U(e,n,i),e.u=!0):e.then(n,i))},ti.toJSON=function(){var t=(this.S||"").match(/B(\d+)T(\d+)(?:Q(\d+?))?(?:R(\d+))?/)||[];return{method:this.m?this.m.split(":"):[],branchNo:parseFloat(t[1]),transactionNo:parseFloat(t[2]),queueNo:parseFloat(t[3]),requestNo:parseFloat(t[4])}};var Pi=qi&&qi.cmp?f(qi.cmp,qi):de,Di=[],Ri=0;ke.prototype.preventDefault=function(){},d(Se,ke),Se.prototype.a=function(){return this.b},d(Ne,Se),ti=Ne.prototype,ti.name="ReadyEvent",ti.version=0/0,ti.Wa=0/0,ti.Ka=null,ti.ob=function(){return this.version},ti.bb=function(){return this.Wa},ti.ab=function(){return this.Ka},d(Ce,Se),Ce.prototype.toString=function(){return this.name+":"+(this.error?this.error:"")},Ce.prototype.name="ErrorEvent",Ce.prototype.error=null,Ce.prototype.c=function(){return this.error},d(Te,Ce),Te.prototype.name="FailEvent",ti=Oe.prototype,ti.toJSON=function(){var t={store:this.b,id:this.a};return this.c&&(t.parent=this.c.toJSON()),t},ti.valueOf=function(){return(this.c?this.c.valueOf()+"^|":"")+this.b+"^:"+this.a},ti.toString=function(){return this.valueOf().replace("^|","|").replace("^:",":")},ti.jb=function(){return this.b},ti.$a=function(){return this.a},ti.ib=function(){return this.c},je.prototype.lower=void 0,je.prototype.upper=void 0,je.prototype.toJSON=function(){var t;return t=this||{},{lower:t.lower,upper:t.upper,lowerOpen:t.lowerOpen,upperOpen:t.upperOpen}},je.only=function(t){return new je(t,t,!1,!1)},je.bound=function(t,e,n,r){return new je(t,e,n,r)},je.upperBound=function(t,e){return new je(void 0,t,void 0,!!e)},je.lowerBound=function(t,e){return new je(t,void 0,!!e,void 0)};var Ii=ei.IDBKeyRange||ei.webkitIDBKeyRange||je,Mi="TEXT",Fi=["BLOB","DATE","INTEGER","NUMERIC",Mi];Le.prototype.getName=function(){return this.a},Le.prototype.toJSON=function(){return{name:this.a,keyPath:this.keyPath,type:this.type,unique:this.unique,multiEntry:this.multiEntry}},Le.prototype.clone=function(){var t=n(this.keyPath)?M(this.keyPath):this.keyPath;return new Le(t,this.type,this.unique,this.multiEntry,this.a,this.e)},Le.prototype.hint=function(e){if(!e)return this;var r=n(this.keyPath)?M(this.keyPath):this.keyPath,i=this.type;return t(e.type)||"TEXT"!=i||(i=void 0),new Le(r,i,this.unique,this.multiEntry,e.a)},ti=We.prototype,ti.L=!1,ti.P=!1,ti.toJSON=function(){for(var t=[],e=0;e<this.a.length;e++)t.push(this.a[e].toJSON());return{name:this.d,keyPath:this.keyPath,autoIncrement:this.b,type:this.type,indexes:t}},ti.clone=function(){return Ve(this.toJSON())},ti.index=function(t){return this.a[t]||null},ti.getName=function(){return this.d},pn.prototype.getName=function(){return this.name},pn.prototype.count=function(){return this.a.length},pn.prototype.index=function(t){return this.a[t]},vn.prototype.toJSON=function(){var e=gi(this.stores,function(t){return t.toJSON()}),n={};return n.stores=e,t(this.version)&&(n.version=this.version),n},vn.prototype.b=!1,vn.prototype.a=function(){return!1},vn.prototype.count=function(){return this.stores.length},d(wn,vn),wn.prototype.a=function(){return!0},d(xn,Error),xn.prototype.name="ydn.InternalError",d(En,Error),En.prototype.name="ydn.error.ConstraintError",d(Sn,Error),Cn.prototype.o=function(e){if(t(e)){var n=function(t){e(t.toJSON()),e=void 0};if(this.a)this.a.J(n);else{var r=this;this.transaction(function(t){r.a.J(n,t)},null,Ti)}}return this.b?this.b.toJSON():null},Cn.prototype.h=function(t){if(this.a)throw new Q("Already connected with "+this.f);this.f=t,On(this)},Cn.prototype.getName=function(){return this.f};var Li="indexeddb sqlite websql localstorage sessionstorage userdata memory".split(" ");ti=Cn.prototype,ti.ma=function(){return null},ti.za=function(){return this.a?this.a.Ta():void 0},ti.ha=function(t,e){this.d.Ba(t,e)},ti.close=function(){this.a&&(this.a.close(),this.a=null)},ti.nb=function(){return this.a?this.a.Sa():null},ti.Ha=0/0,ti.ea=!1,ti.transaction=function(e,n,r,o){var a=n;if(i(n)?a=[n]:null!=n||(a=null),this.a&&this.a.xa()&&!this.ea){var u=this,c=t(r)?r:Ti;c==Ai&&(this.ea=!0),this.a.na(function(t){e(t),e=null},a,c,function(t,e){s(o)&&(o(t,e),o=void 0),c==Ai&&(u.ea=!1),jn(u)})}else this.e.push({ca:e,gb:a,mode:r,t:o})},Cn.prototype.close=Cn.prototype.close,Cn.prototype.getType=Cn.prototype.za,Cn.prototype.getName=Cn.prototype.getName,Cn.prototype.getSchema=Cn.prototype.o,Cn.prototype.onReady=Cn.prototype.ha,Cn.prototype.setName=Cn.prototype.h,Cn.prototype.transaction=Cn.prototype.transaction,Cn.prototype.db=Cn.prototype.nb,p("ydn.db.version","1.0.4"),p("ydn.db.cmp",Pi),p("ydn.db.deleteDatabase",function(t,e){for(var n,r=0;r<Di.length;r++){var i=Di[r](t,e);i&&(n=i)}return n||xe("vc",null)}),Ne.prototype.name=Ne.prototype.name,Ne.prototype.getVersion=Ne.prototype.ob,Ne.prototype.getOldVersion=Ne.prototype.bb,Ne.prototype.getOldSchema=Ne.prototype.ab,Ce.prototype.getError=Ce.prototype.c,ve.prototype.abort=ve.prototype.abort,ve.prototype.canAbort=ve.prototype.Za,ie.prototype.progress=ie.prototype.ua,ie.prototype.promise=ie.prototype.hb,d(Pn,Ee),ti=Pn.prototype,ti.Aa=function(e,r,o,a,s){t(r)&&(e=this.a,this.g=(n(r)?Ye(e,r):Xe(e,r)).getName()),this.e=i(this.g),this.O=o||null,this.l=this.h=!1,this.p="prev"==a||"prevunique"==a,this.unique="nextunique"==a||"prevunique"==a,this.D=a,this.fa=s,this.Q=this.f=this.c=void 0},ti.D="",ti.O=null,ti.unique=!1,ti.p=!1,ti.fa=!0,ti.F=function(t,e,n){null==t&&(this.h=!0),this.c=t,this.f=e,this.Q=n,this.h?(this.o(),Rn(this)):this.o(this.c)},ti.open=function(t,e,n,r){this.j=t,this.h=this.l=!1,this.c=n,this.f=r,this.openCursor(this.c,this.f)},ti.G=function(){return this.e?this.f:this.c},ti.Z=function(){return this.fa?this.G():this.Q},ti.ia=function(){},ti.T=function(){},d(Fn,Mn),Fn.prototype.c=!0;var _i="init";Fn.prototype.clone=function(){var t=new Fn(this.b,this.d,this.a,_n(this),Bn(this),this.c,this.j);return t.m=this.m,t},Fn.prototype.unique=function(t){return new Fn(this.b,this.d,this.a,_n(this),t,this.c,this.j)},Fn.prototype.load=function(t){t=t[0],t.Aa(this.b,this.j||this.d,this.a,this.f,this.c),this.e="busy";var e=this;return t.X=function(t,n,r){e.g=n,e.h=r,e.e=t?"rest":"done"},t.openCursor(this.g,this.h),t},Fn.prototype.stores=function(){return[this.b]},Un.prototype.c=function(){return[]},d(Vn,Error),Vn.prototype.name="ConstraintError",d(zn,Error),d(Kn,Error),d(Gn,Error),Gn.prototype.name="NotFoundError",d(Jn,Error),d(Xn,Error),d(Yn,Error),Zn.prototype.v=null,Zn.prototype.t=null,er.prototype.type=function(){return this.h.za()},er.prototype.H=function(){return"B"+this.B+"T"+this.d};var Bi="single";/*
 Copyright 2012 YDN Authors, Yathit. All Rights Reserved.
 Licensed under the Apache License, Version 2.0 (the "License");.
*/
/*
 Copyright 2012 YDN Authors, Yathit. All Rights Reserved.
 Licensed under the Apache License, Version 2.0 (the "License");.
*/
return d(rr,er),ti=rr.prototype,ti.abort=function(){nr(this.g)},ti.N=function(e,n,r,o){var a=i(n)?[n]:n,u=t(r)?r:Ti,c=this;if(this.b.a||!qn(this.h)&&this.m)this.c.push({ca:e,v:n,mode:u,t:o});else{if(o&&this.e.push(o),this.l&&this.d>=this.l)throw new Q("Exceed maximum number of transactions of "+this.l);this.m=!0,this.h.transaction(function(t){var r=c.b;for(r.a=t,r.c=!1,r.v=n,r.mode=u,r.b++,r.t=null,fn(n),e(c),e=null;or(c);)t=c.c.shift(),t.t&&c.e.push(t.t),t.ca()},a,u,function(t,e){var n=c.b;for(n.a&&(n.a=null,n.v=null,n.mode=null,s(n.t)&&n.t(t,e),n.t=null),n=0;n<c.e.length;n++)c.e[n](t,e);c.e.length=0,(n=c.c.shift())&&c.N(n.ca,n.v,n.mode,n.t),c.a=0})}},ti.H=function(){var t=this.b;return"B"+t.d+"T"+t.b},ti.request=function(t,e,n,r){function i(t,e){o.a=null,r&&r(t,e)}var o=new ve(t);t=n||Ti;var a=this;return tr(this.b)&&ir(this,e,t)?(e=this.b.a,this.a++,ge(o,e,this.H()+"R"+this.a),this.e.push(i)):a.N(function(){var t=a.b.a;a.a++,ge(o,t,a.H()+"R"+a.a)},e,t,i),o},ti.K=function(t,e,n,r,i){r=r||Ti;var o,a=this;if(tr(a.b)&&ir(this,n,r)){var s=a.b.a;a.a++,o=a.H()+"R"+a.a,e(s,o,function(e,n){a.g=s,n?t.i(e):t.callback(e),a.g=null}),e=null}else a.N(function(){var n=a.b.a;a.a++,o=a.H()+"R"+a.a,e(n,o,function(e,r){a.g=n,r?t.i(e):t.callback(e),a.g=null}),e=null},n,r,i)},ti.getName=function(){return this.h.getName()},d(ar,rr),ar.prototype.request=function(t,e,n){var r,i,o,a=ar.r.request.call(this,t,e,n,function(t,e){if(a.a=null,r)"complete"!=t&&(o=!0,i=e),r(i,o);else{var n=new Yn;ye(a,n,!0)}});return be(a,function(t,e,n){o=e,i=t,r=n}),a},ar.prototype.K=function(t,e,n,r,i){var o,a,s=new _;U(s,function(t){a=!1,o=t},function(t){a=!0,o=t}),ar.r.K.call(this,s,e,n,r,function(e,n){if("complete"!=e)t.i(n);else if(!0===a)t.i(o);else if(!1===a)t.callback(o);else{var r=new Yn;t.i(r)}i&&(i(e,n),i=void 0)})},sr.prototype.e=function(){return this.a.d},sr.prototype.abort=function(){this.a.abort()},d(cr,sr),ti=cr.prototype,ti.count=function(e,r,o,a){var s,c,l,f;if(null!=e)if(n(e)){if(t(o)||t(r))throw new J("too many arguments.");c=e;for(var h=0;h<c.length;h++)if(!yn(this.b,c[h]))throw new J('store name "'+c[h]+'" at '+h+" not found.");re("countStores: "+fn(c)),s=this.a.request("d",c),we(s,function(){ur(this).la(s,c)},this)}else{if(!i(e))throw new J("Invalid store name or store names.");if(h=mn(this.b,e),!h)throw new J('store name "'+e+'" not found.');if(c=[e],i(r))l=r,f=u(o)?Re(o):null;else{if(!u(r)&&null!=r)throw new J('invalid second argument for count "'+ln(o)+'" of type '+typeof r);if(u(r))f=Re(r);else{if(null!=r)throw new J("key range must be  an object but found "+ln(r)+" of type "+typeof r);f=null}}re("countKeyRange: "+e+" "+(l?l:"")+fn(f)),s=this.a.request("d",c),un(h,s,arguments),we(s,function(){ur(this).Ga(s,c[0],f,l,!!a)},this)}else h=gn(this.b),s=this.a.request("d",h),be(s,function(t,e,n){if(e)n(t,!0);else{for(var r=e=0;r<t.length;r++)e+=t[r];n(e,!1)}},this),we(s,function(){ur(this).la(s,c)},this);return s},ti.get=function(e,n){var r,o=this;if(e instanceof Oe){var a=e,s=a.b,u=mn(this.b,s);if(!u){if(this.b.a())return qn(this.c)?xe("e",void 0):(r=new ve("e"),this.c.ha(function(){U(o.get(e,n),function(t){r.callback(t)},function(t){r.i(t)})}),r);throw new J("Store: "+s+" not found.")}var c=a.a;r=this.a.request("ek",[s]),un(u,r,arguments,void 0,this),we(r,function(){ur(this).pa(r,s,c)},this)}else{if(!i(e)||!t(n))throw new J("get require valid input arguments.");var l=e,u=mn(this.b,l);if(!u){if(this.b.a())return qn(this.c)?xe("e",void 0):(r=new ve("e"),this.c.ha(function(){U(o.get(e,n),function(t){r.callback(t)},function(t){r.i(t)})}),r);throw new J('Store name "'+l+'" not found.')}var f=n;r=this.a.request("e",[l]),un(u,r,arguments,void 0,this),we(r,function(){ur(this).pa(r,l,f)},this)}return r},ti.U=function(e,n,r,s,c,l,f){var h,p,d=null,v=!1,g=!1,m=e,y=mn(this.b,m);if(this.b.a()&&!y)return xe("g",[]);var b;if(i(n)){var w=n,d=Re(r);if(a(s))h=s;else{if(t(s))throw new J("limit must be a number");h=100}if(a(c))p=c;else{if(t(c))throw new J("offset must be a number");p=0}if(t(l)){if(!o(l))throw new J("reverse must be a boolean");v=l}if(t(f)){if(!o(f))throw new J("unique must be a boolean");g=f}b=this.a.request("i",[m]),un(y,b,arguments),we(b,function(){ur(this).V(b,2,m,w,d,h,p,v,g)},this)}else{if(d=u(n)?Re(n):null,a(r))h=r;else{if(t(r))throw new J("limit must be a number");h=100}if(a(s))p=s;else{if(t(s))throw new J("offset must be a number");p=0}if(t(c)){if(!o(c))throw new J("reverse must be a boolean");v=c}b=this.a.request("g",[m]),un(y,b,arguments),we(b,function(){ur(this).V(b,2,m,null,d,h,p,v,!1)},this)}return b},ti.w=function(e,r,s,c,l,f,h){var p,d,v,g=this,m=!1,y=!1;if(i(e)){var b=e,w=mn(this.b,b);if(!w){if(this.b.a())return qn(this.c)?xe("s",[]):(p=new ve("s"),this.c.ha(function(){U(g.w(e,r,s,c,l,f),function(t){p.callback(t)},function(t){p.i(t)})}),p);throw new Gn(b)}if(n(r)){var $=r;p=this.a.request("v",[b]),un(w,p,arguments,void 0,this),we(p,function(){ur(this).Ia(p,b,$)},this)}else if(i(r)){var x=r,E=Re(s);if(t(c)){if(!a(c))throw new J("limit must be a number.");d=c}else d=100;if(t(l)){if(!a(l))throw new J("offset must be a number.");v=l}else v=0;if(o(f))m=f;else if(t(f))throw new J("reverse must be a boolean, but "+f);if(t(h)){if(!o(h))throw new J("unique must be a boolean");y=h}p=this.a.request("u",[b]),un(w,p,arguments),we(p,function(){ur(this).V(p,4,b,x,E,d,v,m,y)},this)}else{if(E=null,u(r)&&(E=Re(r)),t(s)){if(!a(s))throw new J("limit must be a number, but "+s+" is "+typeof s);d=s}else d=100;if(t(c)){if(!a(c))throw new J("offset must be a number, but "+c+" is "+typeof c);v=c}else v=0;if(t(l)){if(!o(l))throw new J("reverse must be a boolean, but "+l+" is "+typeof l);m=l}p=this.a.request("s",[b]),un(w,p,arguments),we(p,function(){ur(this).V(p,4,b,null,E,d,v,m,!1)},this)}}else{if(!n(e))throw new J("first argument "+e+" is invalid.");if(!(e[0]instanceof Oe))throw new J("first argumentmust be array of ydn.db.Key, but "+e[0]+" of "+typeof e[0]+" found.");for(var w=[],k=e,S=0;S<k.length;S++){var N=k[S].b;if(!yn(this.b,N)){if(this.b.a())return w=[],w[k.length-1]=void 0,xe("e",w);throw new J("Store: "+N+" not found.")}0<=vi(w,N)||w.push(N)}re("listByKeys: "+fn(w)+" "+k.length+" keys"),p=this.a.request("w",w),we(p,function(){ur(this).Ja(p,k)},this)}return p},ti.add=function(e,r,o){var a=i(e)?e:u(e)?e.name:void 0;if(!i(a))throw new J("store name "+a+" must be a string, but "+typeof a);var s=mn(this.b,a);if(s){if(this.b.a()&&u(e)&&(e=Ve(e),e=an(s,e)))throw new X(e)}else{if(!this.b.a())throw new J('store name "'+a+'" not found.');s=Ve(u(e)?e:{name:a}),Tn(this.c,s)}var c;if(!s)throw new J('store name "'+a+'" not found.');if(i(s.keyPath)&&t(o))throw new J("key must not be provided while the store uses in-line key.");if(!s.keyPath&&!s.b&&!t(o))throw new J("out-of-line key must be provided.");if(n(r)){for(e=0;e<r.length;e++)sn(s,r[e]);c=this.a.request("b",[a],Oi),we(c,function(){ur(this).M(c,!1,!1,a,r,o)},this),s.L&&c.s(function(){},this)}else{if(!u(r))throw new J("record must be an object or array list of objects, but "+r+" of type "+typeof r+" found.");nn(s,r,o),sn(s,r),c=this.a.request("a",[a],Oi),we(c,function(){ur(this).M(c,!1,!0,a,[r],[o])},this),s.L&&c.s(function(){},this)}return c},ti.load=function(t,e,n){var r=n||",",i=lr(this,t).getName();t=this.a.request("i3",[i]);var o=this;return this.a.K(t,function(t,n,a){ur(o).Na(t,n,a,i,e,r)},[i],Oi),t},ti.put=function(e,r,o){var a,s=this;if(e instanceof Oe){var c=e,l=c.b,f=mn(this.b,l);if(!f)throw new J('store "'+l+'" not found.');if(f.keyPath){var h=nn(f,r);if(null!=h){if(0!=Pi(h,c.a))throw new J("Inline key must be "+c+" but "+h+" found.")}else rn(f,r,c.a);return this.put(l,r)}return this.put(l,r,c.a)}if(n(e)){for(var p=e,d=r,c=[],l=0,f=p.length;f>l;l++){h=p[l].b,-1==vi(c,h)&&c.push(h);var v=mn(this.b,h);if(!v)throw new J('store "'+h+'" not found.');v.keyPath&&rn(v,d[l],p[l].a)}for(re("putByKeys: to "+fn(c)+" "+d.length+" objects"),l=0;l<d.length;l++)sn(v,d[l]);a=this.a.request("l",c,Oi),un(v,a,arguments),we(a,function(){ur(s).Ma(a,d,p)},this)}else{if(!i(e)&&!u(e))throw new J("the first argument of put must be store name, store schema or array of keys.");var v=lr(this,e),g=v.getName();if(v.keyPath&&t(o))throw new J("key must not be provided while the store uses in-line key.");if(!v.keyPath&&!v.b&&!t(o))throw new J("out-of-line key must be provided.");if(n(r)){for(var m=r,y=o,l=0;l<m.length;l++)sn(v,m[l]);a=this.a.request("k",[g],Oi),un(v,a,arguments),we(a,function(){ur(this).M(a,!0,!1,g,m,y)},this),v.L&&a.s(function(){},this)}else{if(!u(r))throw new J("put record value must be Object or array of Objects");var b=r,w=o;if(t(ei.Blob)&&b instanceof Blob&&v.P&&!v.keyPath&&0==v.a.length&&Si)a=new ve("j"),c=new FileReader,c.onload=function(t){var e=t.target.result,n=s.a.request("j",[g],Oi);un(v,n,[g,b,w]),we(n,function(){ur(s).M(n,!0,!0,g,[e],[w])},this),U(n,function(t){a.callback(t)},function(t){a.i(t)})},c.onerror=function(t){a.i(t)},c.onabort=function(t){a.i(t)},c.readAsDataURL(b);else{sn(v,b),a=this.a.request("j",[g],Oi);var $=[g,b,w];un(v,a,$),we(a,function(){var e=t(w)?[$[2]]:void 0;ur(s).M(a,!0,!0,g,[$[1]],e)},this)}v.L&&a.s(function(){},this)}}return a},ti.clear=function(e,r){var o;if(i(e)){var a=mn(this.b,e);if(!a)throw new J('store name "'+e+'" not found.');if(u(r)){var s=Re(r);if(null===s)throw new J("clear method requires a valid non-null KeyRange object.");re("clearByKeyRange: "+e+":"+fn(s)),o=this.a.request("c",[e],Oi),un(a,o,[e,s]),we(o,function(){ur(this).Ea(o,e,s)},this)}else{if(t(r))throw new J("clear method requires a valid KeyRange object as second argument, but found "+r+" of type "+typeof r);o=this.a.request("c",[e],Oi),we(o,function(){ur(this).ka(o,[e])},this)}}else{if(!(!t(e)||n(e)&&i(e[0])))throw new J('first argument "'+e+'" is invalid.');var c=e||gn(this.b);re("clearByStores: "+fn(c)),o=this.a.request("c",c,Oi),we(o,function(){ur(this).ka(o,c)},this)}return o},ti.ja=function(o,s,c){var l;if(i(o)){var f=mn(this.b,o);if(!f)throw new J('store name "'+o+'" not found.');if(t(c)){if(!i(s))throw new J('index name "'+s+'" must be a string, but '+typeof s+" found.");var h=Xe(f,s);if(!h)throw new J("index: "+s+" not found in "+o);if(!u(c)&&null!==c)throw new J("key range "+c+' is invalid type "'+typeof c+'".');var p=Re(c);l=this.a.request("p",[o],Oi),we(l,function(){ur(this).Oa(l,o,h.getName(),p)},this)}else if(i(s)||a(s)||r(s)||s instanceof Date){l=this.a.request("m",[o],Oi);var d=[o,s];un(f,l,d),we(l,function(){ur(this).va(l,o,d[1])},this),f.L&&l.s(function(){},this)}else{if(!u(s))throw new J('Invalid key or key range "'+s+'" of type '+typeof s);p=Re(s),re("removeByKeyRange: "+o+":"+fn(p)),l=this.a.request("n",[o],Oi),un(f,l,[o,p]),we(l,function(){ur(this).Pa(l,o,p)},this),f.L&&l.s(function(){},this)}}else if(o instanceof Oe){var v=o.b,f=mn(this.b,v);l=this.a.request("m",[v],Oi);var g=[v,o.a];un(f,l,g),we(l,function(){ur(this).va(l,v,g[1])},this)}else{if(!n(o))throw new J('first argument requires store name, key (ydn.db.Key) or list of keys (array) , but "'+ln(o)+'" ('+e(o)+") found.");for(s=[],c=0,f=o.length;f>c;c++){var m=o[c].b;-1==vi(s,m)&&s.push(m)}if(1>s.length)throw new J('at least one valid key required in key list "'+ln(o)+'"');l=this.a.request("o",s,Oi),we(l,function(){ur(this).Qa(l,o)},this)}return l},d(fr,cr),ti=fr.prototype,ti.get=function(e,n){if(e instanceof Fn){var r=e.b,i=mn(this.b,r);if(!i)throw new J('store "'+r+'" not found.');var o=e.d;if(t(o)&&!Qe(i,o))throw new J('index "'+o+'" not found in store "'+r+'".');var a=this.a.request("f",[r]);return we(a,function(){dr(this,5,a,e,1)},this),a}return fr.r.get.call(this,e,n)},ti.U=function(e,n,r,i,o,s,u){if(e instanceof Fn){var c=100;if(a(n)){if(c=n,1>c)throw new J("limit must be a positive value, but "+n)}else if(t(n))throw new J("limit must be a number,  but "+n);if(t(r))throw new J("offset must not be specified");var l=this.a.request("h",[e.b]);return we(l,function(){e.l?dr(this,1,l,e,c):dr(this,2,l,e,c)},this),l}return fr.r.U.call(this,e,n,r,i,o,s,u)},ti.count=function(e,n,r,i){if(e instanceof Fn){if(t(n)||t(r))throw new J("too many arguments.");var o=this.a.request("d",[e.b]);return we(o,function(){dr(this,6,o,e)},this),o}return fr.r.count.call(this,e,n,r,i)},ti.w=function(e,n,r,i,o,s){if(e instanceof Fn){var u;if(a(n)){if(u=n,1>u)throw new J("limit must be a positive value, but "+u)}else if(t(n))throw new J("limit must be a number, but "+n);if(t(r))throw new J("offset must not be specified");var c=this.a.request("t",[e.b]);return we(c,function(){e.c?dr(this,2,c,e,u):dr(this,4,c,e,u)},this),c}return fr.r.w.call(this,e,n,r,i,o,s)},ti.open=function(t,e,n,r){n=n||Ti;var i=this,o=this.a.request("i5",e.stores(),n);return we(o,function(n){for(var a=$e(o),s=e.stores(),c=[],l=0;l<s.length;l++)c[l]=ur(i).b(n,a,s[l]);var f=e.load(c);f.I=function(t){ye(o,t,!0)},f.o=function(e){if(null!=e){var n=t.call(r,f);!0===n?(f.h=!1,f.l=!1,f.openCursor(void 0,void 0)):u(n)?!0===n.restart?(e=n["continue"],n=n.continuePrimary,f.h=!1,f.l=!1,f.openCursor(n,e)):null!=n["continue"]?f.T(n["continue"]):null!=n.continuePrimary?f.ia(n.continuePrimary):(In(f),ye(o,void 0)):null===n?(In(f),ye(o,void 0)):null!=n?f.T(n):f.advance(1)}else In(f),ye(o,void 0)}},this),o},ti.map=function(t,e){for(var n,r=this,i=t.stores(),o=0;n=i[o];o++)if(!n)throw new J('Store "'+n+'" not found.');return n=this.a.request("i4",i),this.a.K(n,function(n,i,o){for(var a=t.stores(),s=[],u=0;u<a.length;u++)s[u]=ur(r).b(n,i,a[u]);var c=t.load(s);c.I=function(t){o(t,!1)},c.o=function(n){if(null!=n){var r;r=t.l?t.c?n:c.G():t.c?n:c.Z(),e(r),c.advance(1)}else o(void 0),e=null}},i,Ti),n},vr.prototype.d=null,d(mr,er),ti=mr.prototype,ti.abort=function(){nr(this.c)},ti.Xa=function(t,e){var n;if("multi"==this.f)t:if(n=this.b,!n.a||!n.b||e!=n.b&&(n.b!=Oi||e!=Ti)||t.length>n.a.length)n=!1;else{for(var r=0;r<t.length;r++)if(-1==n.a.indexOf(t[r])){n=!1;break t}n=!0}else if("repeat"==this.f)t:if(n=this.b,n.a&&n.b&&e==n.b&&n.a.length==t.length){for(r=0;r<t.length;r++)if(-1==n.a.indexOf(t[r])){n=!1;break t}n=!0}else n=!1;else n="all"==this.f?!0:!1;return n},ti.N=function(e,n,r,i){function o(t){c.d++,s=new vr(t,0,n,u),fn(n),c.b=s,gr(c.b,e,i)}function a(t,e){if(s){for(var n=s,r=0;r<n.c.length;r++)n.c[r](t,e);n.c.length=0,n.d=null,n.a=null,n.c=null}c.a=0}this.u&&(n=this.u),this.o&&(r=this.o);var s,u=t(r)?r:Ti,c=this;if(this.b&&this.b.d&&this.Xa(n,u))gr(this.b,e,i);else{if(this.j&&this.d>=this.j)throw new Q("Exceed maximum number of transactions of "+this.j);this.h.transaction(o,n,u,a)}},ti.request=function(t,e,n,r){var i=new ve(t),o=this;return this.N(function(t){o.a++,ge(i,t,o.H()+"R"+o.a)},e,n||Ti,function(t,e){i.a=null,r&&r(t,e)}),i},ti.K=function(t,e,n,r,i){var o,a=this;this.N(function(n){a.a++,o=a.H()+"R"+a.a,e(n,o,function(e,r){a.c=n,o=a.H()+"R"+a.a,r?t.i(e):t.callback(e),a.c=null}),e=null},n,r,i)},d(yr,mr),yr.prototype.Xa=function(){return!1},yr.prototype.request=function(t,e,n){var r,i,o,a=yr.r.request.call(this,t,e,n,function(t,e){if(a.a=null,r)"complete"!=t&&(o=!0,i=e),r(i,o);else{var n=new Yn;ye(a,n,!0)}});return be(a,function(t,e,n){o=e,i=t,r=n}),a},yr.prototype.K=function(t,e,n,r,i){var o,a,s=new _;U(s,function(t){a=!1,o=t},function(t){a=!0,o=t}),yr.r.K.call(this,s,e,n,r,function(e,n){if("complete"!=e)t.i(n);else if(!0===a)t.i(o);else if(!1===a)t.callback(o);else{var r=new Yn;t.i(r)}i&&(i(e,n),i=void 0)})},d(br,Cn),ti=br.prototype,ti.R=0,ti.Ya=function(t,e,n,r,i,o){t=t||Bi;var a;return"readonly"==r?a=Ti:"readwrite"==r&&(a=Oi),t=wr(this,t,e,n,a,i),this.W(t,o?null:this.g)},ti.W=function(t){return new sr(this,this.b,t)},ti.eb=function(t,e,n){this.R++,e=e||gn(this.b);var r=Ti;if(n)if("readwrite"==n)r=Oi;else if("readonly"!=n)throw new J('Invalid transaction mode "'+n+'"');var i=wr(this,"all",!1,e,r,1),o=this.W(i,this.g),a=new ve("q");return i.N(function(e){ge(a,e,i.H()+"R0"),t(o)},e,r,function(t){a.a=null,ye(a,i.d,"complete"!==t)}),a},ti.pb=function(){return this.c?this.c.a.d:0/0},d($r,br),ti=$r.prototype,ti.W=function(t){return new cr(this,this.b,t)},ti.add=function(t,e,n){return this.c.add(t,e,n)},ti.count=function(t,e,n,r){return this.c.count(t,e,n,r)},ti.get=function(t,e){return this.c.get(t,e)},ti.U=function(t,e,n,r,i,o,a){return this.c.U(t,e,n,r,i,o,a)},ti.w=function(t,e,n,r,i,o){return this.c.w(t,e,n,r,i,o)},ti.load=function(t,e,n){return this.c.load(t,e,n)},ti.put=function(t,e,n){return this.c.put(t,e,n)},ti.clear=function(t,e,n){return this.c.clear(t,e,n)},ti.ja=function(t,e,n){return this.c.ja(t,e,n)},d(xr,$r),xr.prototype.W=function(t){return new fr(this,this.b,t)},xr.prototype.open=function(t,e,n,r){return this.c.open(t,e,n,r)},xr.prototype.map=function(t,e){return this.c.map(t,e)},d(Er,Pn),ti=Er.prototype,ti.ba=function(t){(t=t.target.result)?this.F(t.key,t.primaryKey,t.value):this.F()},ti.openCursor=function(e,n){function r(t,e,n){d.b=p,d.b.onsuccess=f(d.ba,d),d.F(t,d.e?e:void 0,n),p=null}var o=this.O,a=this.j.objectStore(this.ua),s=i(this.g)?a.index(this.g):null;if(t(e))var u=s?!t(n):!0,c=o?o.lower:void 0,l=o?o.upper:void 0,h=o?!!o.lowerOpen:!1,o=o?!!o.upperOpen:!1,o=Pe(this.p?new je(c,e,h,u):new je(e,l,u,o));var p;p=this.fa?s?null!=this.D?s.openKeyCursor(o,this.D):null!=o?s.openKeyCursor(o):s.openKeyCursor():null!=this.D?a.openCursor(o,this.D):null!=o?a.openCursor(o):a.openCursor():s?null!=this.D?s.openCursor(o,this.D):null!=o?s.openCursor(o):s.openCursor():null!=this.D?a.openCursor(o,this.D):null!=o?a.openCursor(o):a.openCursor();var d=this;p.onerror=function(t){var e=p.error;t.preventDefault(),Dn(d,e)},null!=e?p.onsuccess=function(t){if(t=t.target.result){var i=qi.cmp(t.key,e),o=d.p?-1:1;i==o?r(t.key,t.primaryKey,t.value):i==-o?t["continue"](e):null!=n&&qi.cmp(t.primaryKey,n)==o?r(t.key,t.primaryKey,t.value):t["continue"]()}else r()}:(d.b=p,d.b.onsuccess=f(d.ba,d))},ti.ra=function(){return!!this.b},ti.update=function(t){var e=this.b.result;if(e){var n=new _;return t=e.update(t),t.onsuccess=function(t){n.callback(t.target.result)},t.onerror=function(t){t.preventDefault(),n.i(t)},n}throw new Kn("cursor gone")},ti.clear=function(){var t=this.b.result;if(t){var e=new _,t=t["delete"]();return t.onsuccess=function(){e.callback(1)},t.onerror=function(t){t.preventDefault(),e.i(t)},e}throw new Kn("cursor gone")},ti.advance=function(t){var e=this.b.result;1==t?e["continue"]():e.advance(t)},ti.ia=function(t){var e,n=this.b.result,r=this;this.b.onsuccess=function(i){(n=i.target.result)?(e=qi.cmp(n.primaryKey,t),0==e||1==e&&!r.p||-1==e&&r.p?(r.b.onsuccess=f(r.ba,r),r.F(n.key,r.e?n.primaryKey:void 0,n.value)):n["continue"]()):(r.b.onsuccess=f(r.ba,r),r.F())},n["continue"]()},ti.T=function(t){var e=this.b.result;null!=t?e["continue"](t):e["continue"]()},d(kr,Qn),ti=kr.prototype,ti.la=function(t,e){function n(i){var o=t.a.objectStore(e[i]).count();o.onsuccess=function(o){r[i]=o.target.result,i++,i==e.length?ye(t,r):n(i)},o.onerror=function(e){e.preventDefault(),ye(t,o.error,!0)}}var r=[];0==e.length?ye(t,[]):n(0)},ti.M=function(t,e,n,r,i,o){function a(r){if(null==i[r])if(u++,u==i.length)ye(t,s,c);else{var f=r+10;f<i.length&&a(f)}var h,f=i[r];h=o&&null!=o[r]?e?l.put(f,o[r]):l.add(f,o[r]):e?l.put(f):l.add(f),h.onsuccess=function(e){u++,s[r]=e.target.result,u==i.length?ye(t,n?s[0]:s,c):(e=r+10,e<i.length&&a(e))},h.onerror=function(e){u++;var o=h.error;ln(i[r]),s[r]=o,c=!0,e.preventDefault(),u==i.length?ye(t,n?s[0]:s,c):(e=r+10,e<i.length&&a(e))}}var s=[],u=0,c=!1,l=t.a.objectStore(r);if(0<i.length)for(r=0;10>r&&r<i.length;r++)a(r);else ye(t,[])},ti.Ma=function(t,e,n){function r(s){var u,c=n[s],l=t.a.objectStore(c.b);u=null===l.keyPath?l.put(e[s],c.a):l.put(e[s]),u.onsuccess=function(n){o++,i[s]=n.target.result,o==e.length?ye(t,i,a):(n=s+10,n<e.length&&r(n))},u.onerror=function(n){o++,i[s]=u.error,a=!0,n.preventDefault(),o==e.length?ye(t,i,a):(n=s+10,n<e.length&&r(n))}}var i=[],o=0,a=!1;if(0<e.length)for(var s=0;10>s&&s<e.length;s++)r(s);else ye(t,i,a)},ti.Na=function(t,e,n,r,i,o){function a(){var t,e={},r=i.indexOf("\n",c),h=!1;for(-1==r?(h=!0,t=i.substring(c)):(t=i.substring(c,r),c=r+1),r=t.split(o),t=0;t<l.length;t++){var p=r[t];f[t]&&(f[t]==Mi?p=y(p):"INTEGER"==f[t]?p=parseInt(p,10):"NUMERIC"==f[t]&&(p=parseFloat(p))),e[l[t]]=p}var d=s.put(e);d.onsuccess=function(t){u.push(t.target.result),h?n(u):a()},d.onerror=function(t){t.preventDefault(),n(d.error,!0)}}e=mn(this.a,r);var s=t.objectStore(r),u=[],c=i.indexOf("\n"),l=i.substr(0,c).split(o),f=[];for(t=0;t<l.length;t++)(r=Xe(e,l[t]))?f[t]=r.type:l[t]==e.keyPath&&(f[t]=e.type);c++,a()},ti.va=function(t,e,n){var r=t.a.objectStore(e).openCursor(Ii.only(n));r.onsuccess=function(e){if(e=e.target.result){var n=e["delete"]();n.onsuccess=function(){ye(t,1)},n.onerror=function(){ye(t,n.error,!0)}}else ye(t,0)},r.onerror=function(e){e.preventDefault(),ye(t,r.error,!0)}},ti.Qa=function(t,e){function n(s){if(s++,s>=e.length)0<a.length?ye(t,a,!0):ye(t,o);else{e[s].b!=r&&(r=e[s].b,i=t.a.objectStore(r));var u=i["delete"](e[s].a);u.onsuccess=function(){o++,n(s)},u.onerror=function(t){t.preventDefault(),a[s]=u.error,n(s)}}}var r,i,o=0,a=[];n(-1)},ti.Pa=function(t,e,n){var r=t.a.objectStore(e),i=r.count(n);i.onsuccess=function(e){var i=e.target.result,o=r["delete"](n);o.onsuccess=function(){ye(t,i)},o.onerror=function(){ye(t,o.error,!0)}},i.onerror=function(e){e.preventDefault(),ye(t,i.error,!0)}},ti.Ea=function(t,e,n){var r=t.a.objectStore(e)["delete"](n);r.onsuccess=function(){ye(t,void 0)},r.onerror=function(e){e.preventDefault(),ye(t,r.error,!0)}},ti.Oa=function(t,e,n,r){var i=[],o=t.a.objectStore(e).index(n).openCursor(r),a=0;o.onsuccess=function(e){var n=e.target.result;if(n){var r=n["delete"]();r.onsuccess=function(){a++,n["continue"]()},r.onerror=function(t){i.push(r.error),t.preventDefault(),n["continue"]()}}else 0<i.length?ye(t,i,!0):ye(t,a)},o.onerror=function(e){e.preventDefault(),ye(t,o.error,!0)}},ti.ka=function(t,e){for(var n=e.length,r=0,i=0;n>i;i++){var o=t.a.objectStore(e[i]).clear();o.onsuccess=function(){r++,r==n&&ye(t,r)},o.onerror=function(e){r++,e.preventDefault(),r==n&&ye(t,o.error,!0)}}},ti.pa=function(t,e,n){var r=t.a.objectStore(e),o=r.get(n);o.onsuccess=function(e){var n=e.target.result;if(!r.keyPath&&0==r.indexNames.length&&Si&&i(n)&&0<=n.indexOf(";base64,")){'"'==n.charAt(0)&&'"'==n.charAt(n.length-1)&&(n=n.substr(1,n.length-2)),n=n.split(";base64,"),e=n[0].split(":")[1];for(var n=window.atob(n[1]),o=n.length,a=new Uint8Array(o),s=0;o>s;++s)a[s]=n.charCodeAt(s);ye(t,new Blob([a.buffer],{type:e}))}else ye(t,e.target.result)},o.onerror=function(e){e.preventDefault(),ye(t,o.error,!0)}},ti.Ia=function(t,e,n){function r(e){if(null==n[e])if(o++,i[e]=void 0,o==s)ye(t,i);else{var u=e+10;s>u&&r(u)}var c;c=a.get(n[e]),c.onsuccess=function(n){o++,i[e]=n.target.result,o==s?ye(t,i):(n=e+10,s>n&&r(n))},c.onerror=function(e){o++,e.preventDefault(),ye(t,c.error,!0)}}var i=[];i.length=n.length;var o=0,a=t.a.objectStore(e),s=n.length;if(s>0)for(e=0;10>e&&s>e;e++)r(e);else ye(t,[])},ti.Ja=function(t,e){function n(o){var a=e[o],s=t.a.objectStore(a.b).get(a.a);s.onsuccess=function(a){i++,r[o]=a.target.result,i==e.length?ye(t,r):(a=o+10,a<e.length&&n(a))},s.onerror=function(e){i++,e.preventDefault(),ye(t,s.error,!0)}}var r=[];r.length=e.length;var i=0;if(0<e.length)for(var o=0;10>o&&o<e.length;o++)n(o);else ye(t,[])},ti.Ga=function(t,e,n,r){e=t.a.objectStore(e),n&&fn(n);var i;null!=r?(r=e.index(r),i=null!=n?r.count(n):r.count()):i=null!=n?e.count(n):e.count(),i.onsuccess=function(e){ye(t,e.target.result)},i.onerror=function(e){e.preventDefault(),ye(t,i.error,!0)}},ti.V=function(e,n,r,i,o,a,s,u,c,l){var f=[],h=e.a.objectStore(r),p=u?c?"prevunique":"prev":c?"nextunique":"next";if(r=$e(e)+" "+n+" "+r+(i?":"+i:"")+(o?fn(o):""),u&&(r+=" reverse"),c&&(r+=" unique"),l&&t(l[0])){c=i?!t(l[1]):!0;var d=l[0],v=o?o.lower:void 0,g=o?o.upper:void 0,m=o?!!o.lowerOpen:!1;o=o?!!o.upperOpen:!1,o=Pe(u?new je(v,d,m,c):new je(d,g,c,o)),r+=" starting from "+fn(l[0]),t(l[1])&&(r+=", "+fn(l[1]))}var y;y=1==n||2==n||3==n?i?h.index(i).openKeyCursor(o,p):h.openCursor(o,p):i?h.index(i).openCursor(o,p):h.openCursor(o,p);var b=!1;y.onsuccess=function(r){if(r=r.target.result){if(!b){if(s>0)return b=!0,void r.advance(s);if(l&&i&&t(l[0]))if(t(l[1])){var o=qi.cmp(r.key,l[0]),c=u?-1:1;if(0==o){if(o=qi.cmp(r.primaryKey,l[1]),0==o)return b=!0,void r["continue"]();if(o!=c)return void r["continue"]();b=!0}else b=!0}else b=!0;else b=!0}1==n?f.push(r.key):2==n?f.push(r.primaryKey):3==n?(c={},i&&(c[i]=r.key),h.keyPath?c[h.keyPath]=r.primaryKey:c._ROWID_=r.primaryKey,f.push(c)):f.push(4==n?r.value:[r.key,r.primaryKey,r.value]),f.length<a?r["continue"]():(l&&(l[0]=qe(r.key),l[1]=qe(r.primaryKey)),ye(e,f))}else l&&(l[0]=void 0,l[1]=void 0),ye(e,f)},y.onerror=function(t){t.preventDefault(),ye(e,y.error,!0)}},d(Sr,kr),Sr.prototype.b=function(t,e,n,r){return e=mn(this.a,n),new Er(t,0,e,r)},d(Nr,Pn),ti=Nr.prototype,ti.G=function(){return this.b},ti.Aa=function(t,e,n,r,o){Nr.r.Aa.call(this,t,e,n,r,o),this.u=i(e)?Xe(this.a,e):null},ti.Z=function(){return this.m},ti.ra=function(){return!!this.j},ti.update=function(t){if(!this.ra())throw new Kn;var e=new _,n=this.G();t=on(this.a,t,n);var r="REPLACE INTO "+Ze(this.a)+" ("+t.Fa.join(", ")+") VALUES ("+t.Ra.join(", ")+")";return ne(this+': update "'+r+'" : '+fn(t.w)),this.j.executeSql(r,t.w,function(){e.callback(n)},function(t,n){return e.i(n),!1}),e},ti.advance=function(t){var e=this.d,n=this.b,r=!0;null==this.d||this.e&&null==this.b||(t-=1,r=!1),Or(this,function(t,r,i){var o=null!=e&&null!=t&&0==Pi(e,t);if(this.e){var a=null!=r&&null!=n&&0==Pi(r,n);if(o&&a)throw new Z("current: "+e+";"+n+" next: "+t+";"+r)}else if(o)throw new Z("current: "+e+" next: "+t);this.F(t,r,i)},this.d,r,t,this.b)},ti.T=function(t){null!=t?Or(this,this.F,t,!0):this.advance(1)},ti.openCursor=function(t,e){Or(this,this.F,t,!1,0,e)},ti.clear=function(){if(!this.ra())throw new Kn;var t=new _,e=this.a.e,e="DELETE FROM "+Ze(this.a)+" WHERE "+e+" = ?",n=[this.G()];return ne(this+': clear "'+e+'" : '+fn(n)),this.j.executeSql(e,n,function(e,n){t.callback(n.rowsAffected)},function(e,n){return t.i(n),!1}),t},ti.ia=function(t){var e=Pi(t,this.b);if(0==e||1==e&&this.p||-1==e&&!this.p)throw new Sn(this+" to continuePrimaryKey  from "+this.b+" to "+t+" on "+this.D+" direction is wrong");Tr(this,this.F,t)},d(Ar,Qn),ti=Ar.prototype,ti.Na=function(){throw new Y("putData")},ti.M=function(e,n,r,i,o,a){function s(n,i){if(null==o[n])if(f++,f==o.length)ye(e,l,h);else{var p=n+2;p<o.length&&s(p,i)}var d;d=t(a)?on(u,o[n],a[n]):on(u,o[n]),p=c+Ze(u)+" ("+d.Fa.join(", ")+") VALUES ("+d.Ra.join(", ")+");",i.executeSql(p,d.w,function(a,p){function v(t,e){var n=c+b("ydn.db.me:"+u.getName()+":"+t.getName())+" ("+u.c+", "+t.c+") VALUES (?, ?)",r=[_e(g,u.type),_e(e,t.type)];i.executeSql(n,r,function(){},function(){return!1})}f++;var g=t(d.key)?d.key:p.insertId;1>p.rowsAffected&&(h=!0,g=new Vn(g+" no-op"));for(var m=0,y=u.a.length;y>m;m++){var w=u.index(m);if(w.multiEntry)for(var $=oe(o[n],w.keyPath),x=($?$.length:0)||0,E=0;x>E;E++)v(w,$[E])}r?ye(e,g):(l[n]=g,f==o.length?ye(e,l,h):(m=n+2,m<o.length&&s(m,a)))},function(t,i){if(f++,h=!0,6==i.code&&(i.name="ConstraintError"),r)ye(e,i,!0);else if(l[n]=i,f==o.length)ye(e,l,h);else{var a=n+2;a<o.length&&s(a,t)}return!1})}n=!n;var u=mn(this.a,i),c=n?"INSERT INTO ":"INSERT OR REPLACE INTO ";i=e.a;var l=[],f=0,h=!1;if(0<o.length)for(n=0;2>n&&n<o.length;n++)s(n,i);else ye(e,[])},ti.Ma=function(t,e,n){if(0==n.length)ye(t,[]);else{for(var r=[],i=0,o=0,a=this,s=function(s,u){for(var c=[],l=en(mn(a.a,s)),f=l?void 0:[],h=0;h<u.length;h++)c.push(e[u[h]]),l||f.push(n[u[h]].a);l=me(t),U(l,function(e){for(var n=0;n<u.length;n++)r[u[n]]=e[n];i++,i==o&&ye(t,r)},function(){i++,i==o&&ye(t,r,!0)}),a.M(l,!1,!1,s,c,f)},u="",c=[],l=[],f=0;f<n.length;f++){var h=n[f].b,p=n[f].a;h!=u?(o++,0<c.length&&s(u,c),c=[f],l=[p],u=h):(c.push(f),l.push(p))}0<c.length&&s(u,c)}},ti.pa=function(t,e,n){var r=t.a,i=mn(this.a,e);e=i.c,n=[_e(n,i.type)],e="SELECT * FROM "+Ze(i)+" WHERE "+e+" = ?",r.executeSql(e,n,function(e,n){if(0<n.rows.length){var r=n.rows.item(0);null!=r?(r=qr(r,i),ye(t,r)):ye(t,void 0)}else ye(t,void 0)},function(e,n){return ye(t,n,!0),!1})},ti.Ia=function(t,e,n){function r(e,i){var u=s.c,c=[_e(n[e],s.type)],u="SELECT * FROM "+Ze(s)+" WHERE "+u+" = ?";i.executeSql(u,c,function(i,u){if(a++,0<u.rows.length){var c=u.rows.item(0);null!=c&&(o[e]=qr(c,s))}else o[e]=void 0;a==n.length?ye(t,o):(c=e+10,c<n.length&&r(c,i))},function(i){if(a++,a==n.length)ye(t,o);else{var s=e+10;s<n.length&&r(s,i)}return!1})}var i=t.a,o=[],a=0,s=mn(this.a,e);if(0<n.length)for(e=0;10>e&&e<n.length;e++)r(e,i);else ye(t,[])},ti.Ja=function(t,e){function n(r,s){var u=e[r],c=mn(i.a,u.b),l=Ae(u),u=c.c,l=[_e(l,c.type)],u="SELECT * FROM "+Ze(c)+" WHERE "+u+" = ?";s.executeSql(u,l,function(i,s){if(a++,0<s.rows.length){var u=s.rows.item(0);null!=u&&(o[r]=qr(u,c))}else o[r]=void 0;a==e.length?ye(t,o):(u=r+10,u<e.length&&n(u,i))},function(e,n){return ye(t,n,!0),!1})}var r=t.a,i=this,o=[],a=0;if(0<e.length)for(var s=0;10>s&&s<e.length;s++)n(s,r);else ye(t,[])},ti.ka=function(t,e){function n(r,o){function a(t){t="DELETE FROM  "+b("ydn.db.me:"+s.getName()+":"+t.getName()),o.executeSql(t,[])}var s=mn(i.a,e[r]),u="DELETE FROM  "+Ze(s);o.executeSql(u,[],function(i){r==e.length-1?ye(t,e.length):n(r+1,i)},function(e,n){return ye(t,n,!0),!1});for(var u=0,c=s.a.length;c>u;u++){var l=s.index(u);l.multiEntry&&a(l)}}var r=t.a,i=this;0<e.length?n(0,r):ye(t,0)},ti.Qa=function(t,e){function n(s){if(s>=e.length)ye(t,o,a);else{var u=mn(i.a,e[s].b),c=_e(e[s].a,u.type),l=" WHERE "+u.c+" = ?",f="DELETE FROM "+Ze(u)+l;r.executeSql(f,[c],function(){o++,n(s)},function(){return a=!0,n(s),!1}),s++;for(var f=function(t){t="DELETE FROM  "+b("ydn.db.me:"+u.getName()+":"+t.getName())+l,r.executeSql(t,[c])},h=0,p=u.a.length;p>h;h++){var d=u.index(h);d.multiEntry&&f(d)}}}var r=t.a,i=this,o=0,a=!1;n(0)},ti.va=function(t,e,n){function r(t){t="DELETE FROM  "+b("ydn.db.me:"+o.getName()+":"+t.getName())+s,i.executeSql(t,[a])}var i=t.a,o=mn(this.a,e),a=_e(n,o.type),s=" WHERE "+o.c+" = ?";for(e="DELETE FROM "+Ze(o)+s,i.executeSql(e,[a],function(e,n){ye(t,n.rowsAffected)},function(e,n){return ye(t,n,!0),!1}),e=0,n=o.a.length;n>e;e++){var u=o.index(e);u.multiEntry&&r(u)}},ti.Ea=function(t,e,n){jr(this,t,e,void 0,n)},ti.Pa=function(t,e,n){jr(this,t,e,void 0,n)},ti.Oa=function(t,e,n,r){jr(this,t,e,n,r)},ti.la=function(t,e){function n(o){var a="SELECT COUNT(*) FROM "+b(e[o]);r.executeSql(a,[],function(r,a){var s=a.rows.item(0);i[o]=parseInt(s["COUNT(*)"],10),o++,o==e.length?ye(t,i):n(o)},function(e,n){return ye(t,n,!0),!1})}var r=t.a,i=[];0==e.length?ye(t,0):n(0)},ti.Ga=function(t,e,n,r,i){var o=[];e=ze(mn(this.a,e),o,6,r,n,!1,i),t.a.executeSql(e,o,function(e,n){var r;t:{if(r=n.rows.item(0))for(var i in r)if(r.hasOwnProperty(i)){r=r[i];break t}r=void 0}ye(t,r)},function(e,n){return ye(t,n,!0),!1})},ti.V=function(e,n,r,i,o,s,u,c,l,f){var h=[],p=mn(this.a,r),d=p.e,v=p.type,g=v,m=null!=i&&i!==d?Xe(p,i):null,y=i||d;if(m&&(g=m.type),r=[],f&&t(f[0])){var b=f[0];i=m&&t(f[1])?Je(p,n,r,m.getName(),o,b,!0,f[1],c,l):Ge(p,n,r,i,o,c,l,b,!0)}else i=ze(p,r,n,y,o,c,l);a(s)&&(i+=" LIMIT "+s),a(u)&&(i+=" OFFSET "+u),fn(r),e.a.executeSql(i,r,function(t,r){for(var i,o=r.rows.length,a=0;o>a;a++)i=r.rows.item(a),2==n?h[a]=Be(i[d],v):1==n?h[a]=Be(i[y],g):3==n?h[a]=[Be(i[y],g),Be(i[d],v)]:null!=i&&(h[a]=qr(i,p));f&&i&&(f[0]=Be(i[y],g),f[1]=Be(i[d],v)),ye(e,h)},function(t,n){return ye(e,n,!0),!1})},d(Pr,Ar),Pr.prototype.b=function(t,e,n,r){return e=mn(this.a,n),new Nr(t,0,e,r)},ti=Dr.prototype,ti.wa=function(e,n){function r(t,e){for(var r=0;r<n.stores.length;r++)Rr(t,e,n.stores[r]);for(var i=t.objectStoreNames,o=i.length,r=0;o>r;r++)yn(n,i[r])||t.deleteObjectStore(i[r])}function i(e,n){u.c||(t(n)?(s.n=null,u.i(n)):(s.n=e,s.n.onabort=function(){},s.n.onerror=function(){},s.n.onversionchange=function(t){if(s.n&&(s.n.onabort=null,s.n.onblocked=null,s.n.onerror=null,s.n.onversionchange=null,!t.defaultPrevented)){s.n.close(),s.n=null;var e=Error();e.name=t.type,s.ya(e)}},u.callback(parseFloat(c))))}var o,s=this,u=new _,c=void 0,l=n.version;return o=t(l)?qi.open(e,l):qi.open(e),o.onsuccess=function(o){var u=o.target.result;if(t(c)||(c=u.version),n.b)s.J(function(t){if(n instanceof wn)for(var o=0;o<t.stores.length;o++)yn(n,t.stores[o].getName())||$n(n,t.stores[o].clone());if(0<bn(n,t,!1,!0).length)if(t=a(u.version)?u.version+1:1,"IDBOpenDBRequest"in ei){u.close();var s=qi.open(e,t);s.onupgradeneeded=function(t){r(t.target.result,s.transaction)},s.onsuccess=function(t){i(t.target.result)},s.onerror=function(){i(null)}}else{var c=u.setVersion(t+"");c.a=function(t){i(null,t)},c.onsuccess=function(){c.transaction.oncomplete=l,r(u,c.transaction)};var l=function(){var t=qi.open(e);t.onsuccess=function(t){i(t.target.result)},t.onerror=function(){i(null)
}};null!=c.transaction&&(c.transaction.oncomplete=l)}else i(u)},void 0,u);else if(n.version>u.version){var l=u.setVersion(n.version);l.a=function(t){i(null,t)},l.onsuccess=function(){r(u,l.transaction)}}else s.J(function(t){t=bn(n,t,!1,!0),0<t.length?i(null,new En("different schema: "+t)):i(u)},void 0,u)},o.onupgradeneeded=function(t){t=t.target.result,c=0/0,r(t,o.transaction)},o.onerror=function(t){i(null,t)},o.onblocked=function(t){i(null,t)},a(this.Y)&&!isNaN(this.Y)&&setTimeout(function(){"done"!=o.readyState&&i(null,new Yn("connection timeout after "+s.Y))},this.Y),u},ti.Y=18e4,ti.ya=function(){},ti.Va=function(){},ti.La=function(){},ti.Ta=function(){return"indexeddb"},ti.Sa=function(){return this.n||null},ti.xa=function(){return!!this.n},ti.n=null,ti.Ua=function(){return this.n?parseFloat(this.n.version):void 0},ti.J=function(e,n,r){if(r=r||this.n,t(n)){if(null===n){if(0==r.objectStoreNames.length)return void e(new vn(r.version));throw new xn}r=n.db}else{n=[];for(var i=r.objectStoreNames.length-1;i>=0;i--)n[i]=r.objectStoreNames[i];if(0==n.length)return void e(new vn(r.version));n=r.transaction(n,Ti)}for(var o=r.objectStoreNames,a=[],s=o.length,i=0;s>i;i++){for(var u=n.objectStore(o[i]),c=[],l=0,f=u.indexNames.length;f>l;l++){var h=u.index(u.indexNames[l]);c[l]=new Le(h.keyPath,void 0,h.unique,h.multiEntry,h.name)}a[i]=new We(u.name,u.keyPath,u.autoIncrement,void 0,c)}n=new vn(r.version,a),e(n)},ti.na=function(t,e,n,r){var i=this.n;if(!e){e=[];for(var o=i.objectStoreNames.length-1;o>=0;o--)e[o]=i.objectStoreNames[o]}0==e.length?t(null):(e=i.transaction(e,n),e.oncomplete=function(t){r("complete",t)},e.onabort=function(t){r("abort",t)},t(e),t=null)},ti.close=function(){this.n.close()},Di.push(function(t,e){if(!qi||e&&"indexeddb"!=e)return null;var n=qi.deleteDatabase(t),r=new ve("vc");return n.onblocked=function(t){for(var e=0;e<r.f.length;e++)r.f[e][0].call(r.f[e][1],t)},n.onerror=function(t){r.i(t)},n.onsuccess=function(t){r.callback(t)},r}),ti=Ir.prototype,ti.wa=function(e,n){function r(t,e){var n=t.version?parseInt(t.version,10):0,r=!1,a=0;t.changeVersion(t.version,(e.b?isNaN(n)?1:n+1:e.version)+"",function(n){o.J(function(t){r=!0;for(var i=0;i<e.count();i++){var o=mn(t,(e.stores[i]||null).getName()),o=o?tn(o,e.stores[i]||null):null;Fr(n,e.stores[i]||null,function(t){t&&a++},o)}for(i=0;i<t.count();i++)o=t.stores[i]||null,yn(e,o.getName())||(e instanceof wn?$n(e,o):(o="DROP TABLE "+Ze(o),n.executeSql(o,[],function(){},function(t,e){throw e})))},n,t)},function(t){throw t},function(){r&&i(t)})}function i(e,n){t(n)?(o.q=null,s.i(n)):(o.q=e,s.callback(parseFloat(a)))}var o=this,a=0/0,s=new _,u=null;try{"sqlite"==this.b?ei.sqlitePlugin?(u=ei.sqlitePlugin.openDatabase(e,"",e,this.a),u.readTransaction||(u.readTransaction=u.transaction),u.changeVersion=function(t,e,n,r,i){u.transaction(n,r,i)}):(u=null,this.ga=Error("sqlitePlugin not found.")):u=ei.openDatabase(e,"",e,this.a)}catch(c){if("SECURITY_ERR"!=c.name)throw c;u=null,this.ga=new Xn(c)}return u?(a=u.version||"",null!=n.version&&n.version==u.version?i(u):this.J(function(t){bn(n,t,!0,!1)?r(u,n):i(u)},null,u)):i(null,this.ga),s},ti.Ta=function(){return this.b},ti.ga=null,ti.q=null,ti.Sa=function(){return this.q||null},ti.ya=function(){},ti.Va=function(){},ti.Ua=function(){return this.q?parseFloat(this.q.version):void 0},ti.J=function(t,e,n){function r(t,e){throw e}function o(e,n){if(n&&n.rows){for(var r=0;r<n.rows.length;r++){var o=n.rows.item(r);if("__WebKitDatabaseInfoTable__"!=o.name&&"sqlite_sequence"!=o.name&&"table"==o.type){for(var a,c=("sql"in o?o.sql:void 0),l=c.substr(c.indexOf("("),c.lastIndexOf(")")).match(/(?:"[^"]*"|[^,])+/g),f=void 0,c=[],h=!1,p=!1,d=0;d<l.length;d++){var v=l[d].match(/\w+|"[^"]+"/g),g=gi(v,function(t){return t.toUpperCase()}),m=y(v[0]),v=He(g[1]);if(-1!=g.indexOf("PRIMARY")&&-1!=g.indexOf("KEY")){if(a=v,i(m)&&!/^[\s\xa0]*$/.test(m)&&"_ROWID_"!=m){var b=m.split(","),f=m;1<b.length&&(f=b,a=void 0)}-1!=g.indexOf("AUTOINCREMENT")&&(h=!0)}else if("_ROWID_"!=m)if("_default_"==m)p=!0;else{var w="UNIQUE"==g[2];0==m.lastIndexOf(o.tbl_name+"-",0)&&(m=m.substr(o.tbl_name.length+1)),g=new Le(m,v,w),c.push(g)}}if(0==o.name.lastIndexOf("ydn.db.me:",0)){var $=o.name.split(":");if(3<=$.length){var x=$[1],f=new Le($[2],v,w,!0),l=R(c,function(t){return t.getName()==$[2]});l>=0?c[l]=f:c.push(f),l=R(u,function(t){return t.getName()===x}),l>=0?(f=u[l],u[l]=new We(f.getName(),f.keyPath,h,a,c,void 0,!p)):u.push(new We(x,void 0,!1,void 0,[f]))}}else d=R(u,function(t){return t.getName()===o.name}),d>=0?(l=u[d].index(0),c.push(l),u[d]=new We(o.name,f,h,a,c,void 0,!p)):(c=new We(o.name,f,h,a,c,void 0,!p),u.push(c))}}r=new vn(s,u),t(r)}}var a=this,s=(n=n||this.q)&&n.version?parseFloat(n.version):void 0,s=isNaN(s)?void 0:s,u=[];e?e.executeSql("SELECT * FROM sqlite_master",[],o,r):n.readTransaction(function(e){a.J(t,e,n)},function(t){throw t},o)},ti.xa=function(){return!!this.q},ti.close=function(){this.q=null},ti.na=function(t,e,n,r){function i(t){r("abort",t)}function o(){r("complete",{type:"complete"})}function a(e){t(e)}null===this.q&&(t(null),r("abort",this.ga)),n==Ti?this.q.readTransaction(a,i,o):n==Ai?this.q.changeVersion(this.q.version,this.q.version+1+"",a,i,o):this.q.transaction(a,i,o)},Di.push(function(t,e){if(s(ei.openDatabase)&&(!e||"websql"==e)){var n=new Ir,r=new wn,r=n.wa(t,r),i=function(){};r.s(function(){n.na(function(t){t.executeSql('SELECT * FROM sqlite_master WHERE type = "table"',[],function(e,n){if(n&&n.rows)for(var r=n.rows.length,i=0,o=0;r>o;o++){var a=n.rows.item(o);"__WebKitDatabaseInfoTable__"!=a.name&&"sqlite_sequence"!=a.name&&(i++,t.executeSql("DROP TABLE "+a.name))}},function(t,e){throw e})},[],Oi,i)}),r.Ca(function(){})}}),Ir.prototype.La=function(){},br.prototype.ma=function(t){return"indexeddb"==t&&qi?new Dr(0,this.m):"sqlite"==t&&ei.sqlitePlugin?new Ir(this.j,"sqlite"):"websql"==t&&s(ei.openDatabase)?new Ir(this.j):null},br.prototype.branch=br.prototype.Ya,br.prototype.getTxNo=br.prototype.pb,sr.prototype.getTxNo=sr.prototype.e,br.prototype.run=br.prototype.eb,$r.prototype.branch=$r.prototype.Ya,$r.prototype.add=$r.prototype.add,$r.prototype.get=$r.prototype.get,$r.prototype.keys=$r.prototype.U,$r.prototype.values=$r.prototype.w,$r.prototype.put=$r.prototype.put,$r.prototype.clear=$r.prototype.clear,$r.prototype.remove=$r.prototype.ja,$r.prototype.count=$r.prototype.count,cr.prototype.add=cr.prototype.add,cr.prototype.get=cr.prototype.get,cr.prototype.keys=cr.prototype.U,cr.prototype.values=cr.prototype.w,cr.prototype.put=cr.prototype.put,cr.prototype.clear=cr.prototype.clear,cr.prototype.remove=cr.prototype.ja,cr.prototype.count=cr.prototype.count,p("ydn.db.Key",Oe),Oe.prototype.id=Oe.prototype.$a,Oe.prototype.parent=Oe.prototype.ib,Oe.prototype.storeName=Oe.prototype.jb,p("ydn.db.KeyRange",je),je.upperBound=je.upperBound,je.lowerBound=je.lowerBound,je.bound=je.bound,je.only=je.only,je.starts=De,Se.prototype.store_name=Se.prototype.b,Se.prototype.getStoreName=Se.prototype.a,d(Lr,xr),p("ydn.db.Storage",Lr),d(Br,Un),Br.prototype.c=function(t,e){var n=[],r=e[0];if(null==r)return[];for(var i=!0,o=!1,a=r,s=[],u=1;u<t.length;u++)if(null!=e[u]){var c=Pi(r,e[u]);s[u]=c,this.a?-1==c?i=!1:1==c&&(i=!1,o=!0,-1==Pi(e[u],a)&&(a=e[u])):1==c?i=!1:-1==c&&(i=!1,o=!0,1==Pi(e[u],a)&&(a=e[u]))}else i=!1,o=!0;if(i)for(o=0;o<t.length;o++)null!=e[o]&&(n[o]=!0);else if(o)for(o=0;o<t.length;o++)null!=e[o]&&(this.a?-1==Pi(a,e[o])&&(n[o]=a):1==Pi(a,e[o])&&(n[o]=a));else for(u=this.a?-1:1,o=1;o<t.length;o++)s[o]===u&&(n[o]=r);return i?(this.b&&this.b.push(a),n):{continuePrimary:n}},d(Hr,Un),Hr.prototype.c=function(t,e){function n(t,e){var n=t.slice(0,t.length-1);return n.push(e),n}function r(t){return t[t.length-1]}var i=[];if(0==t.length||null==t[0]||null==t[0])return[];for(var o=!0,a=0,s=r(t[a]),u=[],c=1;c<t.length;c++){if(null==t[c])return[];var l=r(t[c]),f=Pi(s,l);u[c]=f,this.a?-1==f?o=!1:1==f&&(o=!1,s=l,a=1):1==f?o=!1:-1==f&&(o=!1,s=l,a=1)}if(c=this.a?-1:1,o){for(o=0;o<t.length;o++)null!=t[o]&&(i[o]=!0);return this.b&&this.b.push(e[0]),i}if(0==a)for(o=1;o<t.length;o++)u[o]==c&&(i[o]=n(t[o],s));else for(o=0;o<t.length;o++)o!=a&&null!=t[o]&&Pi(s,r(t[o]))===c&&(i[o]=n(t[o],s));return{"continue":i}},Ur.prototype.clone=function(){var t=new Ur(this.c,this.a,this.f,this.e);return t.d=this.d.slice(),t.b=this.b.slice(),t},Ur.prototype.unique=function(t){var e=this.clone();return e.e=!!t,e},Ur.prototype.k=function(t,e,r,i,o){if(r=Fe(e,r,i,o),0<this.b.length){if(!this.a)return"cannot use where clause with existing filter";if(null!=this.a.lower&&null!=this.a.upper&&0==Pi(this.a.lower,this.a.upper))t=n(this.a.lower)?this.a.lower.slice().push(e):[this.a.lower,e],i=null!=i?i:"\uffff",r=n(this.a.upper)?this.a.upper.slice().push(i):[this.a.upper,i],this.a=Fe(e,t,i,r);else{if(!(1==this.b.length&&this.b[0]==t||n(t)&&F(this.b,t)))return"cannot use where clause with existing filter";this.a=Ie(this.a,r)}}else this.b=n(t)?t:[t],this.a=this.a?Ie(this.a,r):r;return null},d(Jr,_r),Jr.prototype.open=function(){var t={push:function(){}},t=Yr(this)?new Hr(t):new Br(t);return hr(this.db,t,Xr(this))},Jr.prototype.qa=function(){return this.a.slice()},Jr.prototype.select=function(){throw Error("not impl")},d(Qr,_r),ti=Qr.prototype,ti.kb=function(){return new Qr(this.db,this.b,this.type,this.a.clone())},ti.mb=function(){var t=this.a,e=t.clone();return e.f=!t.f,new Qr(this.db,this.b,this.type,e)},ti.unique=function(t){if(!o(t))throw new J("unique value must be a boolean, but "+typeof t+" found");return t=this.a.unique(t),new Qr(this.db,this.b,this.type,t)},ti.C=function(t){var e=i(t)?[t]:t;if(t=this.a.clone(),e=Wr(t,e))throw Error(e);return new Qr(this.db,this.b,this.type,t)},ti.k=function(t,e,n,r,i){if(Kr(this.a)&&Kr(this.a)!=t){var o=Fe(e,n,r,i),o=new Ur(mn(this.b,this.a.c.getName()),o,this.a.f,this.a.e),o=new Qr(this.db,this.b,this.type,o).qa().concat(this.qa());return new Jr(this.db,this.b,this.type,o)}if(!Kr(this.a)&&!Qe(mn(this.b,this.a.c.getName()),t))throw new J('index "'+t+'" not exists in '+this.a.c.getName());if(o=this.a.clone(),t=o.k(t,e,n,r,i))throw new J(t);return new Qr(this.db,this.b,this.type,o)},ti.select=function(e){var n=mn(this.b,this.a.c.getName()),o=i(e)?[e]:e,a=this.type;if(e=this.a.clone(),a=Kr(this.a),1==o.length)if(a=o[0],"_ROWID_"==a||a==n.keyPath)a=2;else if(a&&"*"!=a){if(!Qe(n,a))throw new J('Invalid select "'+a+'", index not found in store "'+n.getName()+'"');if(n=Wr(e,o))throw new J(n);a=1}else a=4;else{if(2!=o.length)throw new J("Selecting more than 2 field names is not supported, but "+o.length+" fields selected.");if(!a)throw new J("Only primary key can be selected for this query.");for(var s=0;2>s;s++){var u;if(u="_ROWID_"!=o[s]){u=n;var c=o[s];u=!(t(u.keyPath)&&(1==u.f.length?u.keyPath===c:r(c)&&F(u.f,c)))}if(u&&o[s]!=a)throw new J('select field name must be "'+a+'", but "'+o[s]+'" found.')}a=3}return new Qr(this.db,this.b,a,e)},ti.lb=function(t){t=t||100;var e=4,n=Zr(this);return this.c&&this.c[0]&&(n=Ln(n,this.c[0],this.c[1])),(2==this.type||3==this.type||1==this.type)&&(e=this.type),t=pr(this.db,e,n,t),t.s(function(){"rest"==n.e&&(this.c=[n.g,n.h])},this),t},ti.qa=function(){return[this.a.clone()]},ti.cb=function(t,e){var r=Zr(this);r.c&&(r=new Fn(r.b,r.d,r.a,_n(r),Bn(r),!1,r.j));var o=this.db.open(function(r){var a=r.Z();if(i(t))ae(a,t,e);else if(n(t))for(var s=0;s<t.length;s++)ae(a,t[s],e[s]);else if(u(t))for(s in t)t.hasOwnProperty(s)&&(a[s]=t[s]);W(o,r.update(a))},r,Oi,this);return o},ti.open=function(t,e){return this.db.open(t,Zr(this),Oi,e)},ti.count=function(){return Gr(this.a)?this.a.e?this.db.count(Vr(this.a)):this.db.count(this.a.c.getName(),Kr(this.a),this.a.a):this.db.count(this.a.c.getName(),this.a.a)},ti.clear=function(){return Gr(this.a)?this.db.clear(this.a.c.getName(),Kr(this.a),this.a.a):this.db.clear(this.a.c.getName(),this.a.a)},xr.prototype.A=function(e,n,r,i,o){if(!yn(this.b,e))throw new J('Store "'+e+'" not found.');var a=null;if(t(n)){if(!t(r))throw new J("boundary value must be defined.");a=Fe(n,r,i,o)}else if(t(i))throw new J("second boundary must not be defined.");return e=new Ur(mn(this.b,e),a),new Qr(this.c,this.b,null,e)},fr.prototype.A=function(e,n,r,i,o){if(!yn(this.b,e))throw new J('Store "'+e+'" not found.');var a=null;if(t(n)){if(!t(r))throw new J("boundary value must be defined.");a=Fe(n,r,i,o)}else if(t(i))throw new J("second boundary must not be defined.");return e=new Ur(mn(this.b,e),a),new Qr(this,this.b,null,e)},Qr.prototype.copy=Qr.prototype.kb,Qr.prototype.count=Qr.prototype.count,Qr.prototype.list=Qr.prototype.lb,Qr.prototype.order=Qr.prototype.C,Qr.prototype.patch=Qr.prototype.cb,Qr.prototype.reverse=Qr.prototype.mb,Qr.prototype.unique=Qr.prototype.unique,Qr.prototype.where=Qr.prototype.k,xr.prototype.from=xr.prototype.A,fr.prototype.from=fr.prototype.A,ydn},this||{});